import{h as B}from"static/js/chunk-OBSZUAJO.min.js";import"static/js/chunk-3E7WIFOE.min.js";import"static/js/chunk-CL45NH7D.min.js";import{a as F}from"static/js/chunk-MGXHCZSG.min.js";import{Dd as a,F as D,Ha as N,O as S,Qd as g,X as R,Y as j,fe as _,ke as $,pe as w,rb as z,ue as L,w as h,xd as U,yb as q}from"static/js/chunk-NSGK4PAE.min.js";import"static/js/chunk-4A5U2GP4.min.js";import"static/js/chunk-YHARRY32.min.js";import"static/js/chunk-ERHUJP3G.min.js";import"static/js/chunk-YINCPRHN.min.js";import"static/js/chunk-32SZ2X3A.min.js";import"static/js/chunk-2BY25Q75.min.js";import"static/js/chunk-HRGWFZSS.min.js";import"static/js/chunk-FYAAXITJ.min.js";import{g as E}from"static/js/chunk-GDZRQYSV.min.js";import{U as v,V as m,q as M}from"static/js/chunk-4SZKWRVS.min.js";import"static/js/chunk-ICYT6H5B.min.js";import{a as P,b as r}from"static/js/chunk-6Z77QNA7.min.js";import{a as x,i as X,l as O}from"static/js/chunk-57DNK6NM.min.js";O();var d=X(M());function Q(e){let{navigate:t}=U();return q(()=>[J(t),W(t),K(t),Y(t),Z(t)],[,t]),null}function p(e){return Boolean(e.query.text||Object.keys(e.query.filters).length>0)}function V(e){let{filters:t}=e.query;return Boolean("in"in t&&"value"in t.in&&"organization"in t.in.value&&t.in.value.organization)}function C(e){return Boolean(e.query.text==="in:")}function W(e){return{key:"search.users",title:"Users",filters:[te],commands:t=>{if(!p(t)||C(t))return[];let n="users",o=y(t.query.text,n);return o?o.index===n?[l(o,()=>{e({screen:{type:"back_office",tab:{type:"user",user:o.object.objectID},hash:"profile"}})})].filter(r):[]:g.read({query:t.query.text,types:[n],filters:{users:I(t,n)},using:"staff"}).map(c=>c.index!==n?null:l(c,()=>{e({screen:{type:"back_office",tab:{type:"user",user:c.object.objectID},hash:"profile"}})})).filter(r)}}}function J(e){return{key:"search.orgs",title:"Organizations",commands:t=>{if(!p(t)||V(t))return[];let n="organizations",o=y(t.query.text,n);return o?o.index===n?[l(o,()=>{e({screen:{type:"back_office",tab:{type:"org",organization:o.object.objectID},hash:"profile"}})})].filter(r):[]:g.read({query:t.query.text,types:[n],using:"staff"}).map(c=>c.index!==n?null:l(c,()=>{e({screen:{type:"back_office",tab:{type:"org",organization:c.object.objectID},hash:"profile"}})})).filter(r)}}}function K(e){return{key:"search.spaces",title:"Spaces",commands:t=>!p(t)||C(t)?[]:H(t,e,"spaces")}}function Y(e){return{key:"search.collections",title:"Collections",commands:t=>!p(t)||C(t)?[]:H(t,e,"collections")}}function H(e,t,n){let o=y(e.query.text,n);if(o){if(o.index!==n)return[];let c=G(n,o);return[c?l(o,()=>{t({screen:{type:"back_office",tab:c,hash:"profile"}})}):null].filter(r)}let i=g.read({query:e.query.text,types:[n],filters:n==="spaces"?{spaces:I(e,n)}:{collections:I(e,n)},using:"staff"});return F(i,c=>{if(c.index!==n)return null;let b=G(n,c);return b?l(c,()=>{t({screen:{type:"back_office",tab:b,hash:"profile"}})}):null}).filter(r)}function G(e,t){let n=t.object.organization?{type:"org",organization:t.object.organization}:t.object.user?{type:"user",user:t.object.user}:null;return n?e==="spaces"?{type:"space",owner:n,space:t.object.objectID}:{type:"collection",owner:n,collection:t.object.objectID}:null}function Z(e){return{key:"search.custom_domain",title:"Custom Domain",commands:t=>{if(!p(t))return[];let n=T(t.query.text);return n?[l(n,()=>{e({screen:{type:"back_office",tab:{type:"custom_domain",hostname:n.object.objectID}}})})].filter(r):[]}}}function y(e,t){if(e=e.trim(),!e||e.includes(" ")||e.includes("/"))return null;switch(t){case"users":let[n]=a([h(e)]);if(!n)return null;let{uid:o,email:i,displayName:c,photoURL:b}=n;return{index:t,object:{objectID:o,email:i||"No email found",displayName:c,photoURL:b}};case"organizations":let[f]=a([j(e)]);return f?{index:t,object:{objectID:f.key,title:f.title,logoURL:f.logoURL}}:null;case"spaces":let[s]=a([S(e)]);return s?{index:t,object:{objectID:s.key,title:s.title,iconURL:s.iconURL,organization:s.organization,user:s.user,editedBy:[]}}:null;case"collections":let[u]=a([D(e)]);return u?{index:t,object:{objectID:u.key,organization:u.organization,user:u.user,collection:u.collection,title:u.title}}:null}return null}function T(e){if(e=e.trim(),!B(e))return null;let[t]=a([R(e)]);if(!t)return null;let n;switch(t.type){case"organization":n={type:t.type,organization:t.organization};break;case"collection":n={type:t.type,collection:t.collection};break;case"space":n={type:t.type,space:t.space};break;default:P(t)}return{index:"custom_domain",object:x({objectID:t.hostname,deprecated:t.deprecated},n)}}function I(e,t){let{filters:n}=e.query,o=[];if(n.in&&n.in.value.organization)if(t==="users"){let i=N(n.in.value.organization);o.push(`(${i})`)}else["spaces","collections"].includes(t)&&o.push(`organization:${n.in.value.organization}`);return o.length>0?o.join(" AND "):void 0}function ee(e){return t=>{let n=y(t.query.text,e);return n?n.index===e?[l(n,i=>z(i,"in",{text:n.object.title,value:e==="organizations"?{organization:n.object.objectID}:{collection:n.object.objectID}}))].filter(r):[]:g.read({query:t.query.text,types:[e],using:"staff"}).map(i=>{if(i.index!==e)throw new Error("invalid result");return l(i,c=>z(c,"in",{text:i.object.title,value:e==="organizations"?{organization:i.object.objectID}:{collection:i.object.objectID}}))}).filter(r)}}var te={key:"in",title:"organization",commands:ee("organizations")};function l(e,t){switch(e.index){case"users":return{key:e.object.objectID,title:`${e.object.displayName} (${e.object.email})`,subtitle:e.object.objectID,icon:()=>d.createElement(_,{user:e.object,size:m.ICON_XL}),trigger:t};case"organizations":return{key:e.object.objectID,title:e.object.title,subtitle:e.object.objectID,icon:()=>d.createElement($,{org:e.object,size:m.ICON_XL}),trigger:t};case"collections":case"spaces":let n=e.object.user?"user":"organization",o=n==="user"?h(e.object.user):j(e.object.organization),[i]=a([o]),c=i?n==="user"?[`User: ${i.displayName} (${i.email})`]:[`Organization: ${i.title}`]:void 0;return{key:e.object.objectID,title:e.object.title,subtitle:e.object.objectID,body:c,icon:()=>e.index==="spaces"?d.createElement(L,{space:e.object,size:m.ICON_XL}):d.createElement(w,{collection:e.object,size:m.ICON_XL,style:[{color:v.WHITE}]}),trigger:t};case"custom_domain":return ne(e,t);default:return null}}function ne(e,t){let n,o;switch(e.object.type){case"organization":let i=j(e.object.organization),[c]=a([i]);n=[`${c?`Organization: ${c.title} | `:""}Connection: ${e.object.deprecated?"Deprecated":"In Use"}`];break;case"collection":let f=D(e.object.collection),[s]=a([f]);n=[`${s?`Collection: ${s.title} | `:""}Connection: ${e.object.deprecated?"Deprecated":"In Use"}`];break;case"space":let A=S(e.object.space),[k]=a([A]);n=[`${k?`Space: ${k.title} | `:""}Connection: ${e.object.deprecated?"Deprecated":"In Use"}`];break}return{key:e.object.objectID,title:e.object.objectID,subtitle:o,body:n,icon:E.Globe,trigger:t}}export{Q as default};
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/BindBackOfficeSearchPalette.lazycomponent-EXEE65KD.min.js.map
