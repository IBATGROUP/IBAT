import{a as Ho,b as Ur,c as Go,d as Wo,e as Rn,f as He,g as Jo,h as Qo,i as Xo,j as hs}from"static/js/chunk-O7NUXO7Y.min.js";import{$a as Tn,Bd as An,Cc as us,Db as rs,Dd as ka,Ed as We,Fb as ns,Gb as as,Hd as ds,Jc as On,Ka as Ko,Kb as $r,M as ba,Nd as fs,O as zr,Ob as is,Pb as Wt,Rd as ps,Sb as Nn,Ud as Fe,V as Vu,Xa as Ct,Xb as wr,Y as Lr,Yd as ms,_ as Uo,d as Rt,eb as Nt,fb as ts,fc as wt,fe as Na,g as yr,gb as Pa,gc as ss,hc as ls,ib as Cn,ic as St,jb as Ra,ke as Oa,n as Fo,ob as _r,p as Ht,pa as Bo,pc as Jt,q as bn,qc as cs,r as vr,s as En,u as zo,ue as Da,w as Pn,xd as Sr,yd as Dn,zd as Ca}from"static/js/chunk-PL2OKTLZ.min.js";import{f as kn}from"static/js/chunk-4A5U2GP4.min.js";import"static/js/chunk-YHARRY32.min.js";import"static/js/chunk-ERHUJP3G.min.js";import"static/js/chunk-YINCPRHN.min.js";import"static/js/chunk-32SZ2X3A.min.js";import{a as xo}from"static/js/chunk-2BY25Q75.min.js";import{O as os,R as ve,S as Ta,o as Ea,u as $t,v as Gt}from"static/js/chunk-HRGWFZSS.min.js";import{s as be,x as Ge,y as kt}from"static/js/chunk-FYAAXITJ.min.js";import{b as Yo,e as ut,f as Zo,g as L,h as es}from"static/js/chunk-GDZRQYSV.min.js";import{G as ce,T as lt,V as ct,W as E,X as x,q as ye,w as I,y as Mo}from"static/js/chunk-4SZKWRVS.min.js";import"static/js/chunk-ICYT6H5B.min.js";import{a as Tt,b as Lo}from"static/js/chunk-6Z77QNA7.min.js";import{a as k,b as ue,e as st,g as R,i as he,l as f}from"static/js/chunk-57DNK6NM.min.js";var Hr=R(W=>{"use strict";f();Object.defineProperty(W,"__esModule",{value:!0});W.regexpCode=W.getEsmExportName=W.getProperty=W.safeStringify=W.stringify=W.strConcat=W.addCodeArg=W.str=W._=W.nil=W._Code=W.Name=W.IDENTIFIER=W._CodeOrName=void 0;var Br=class{};W._CodeOrName=Br;W.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Xt=class extends Br{constructor(e){if(super(),!W.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};W.Name=Xt;var ze=class extends Br{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Xt&&(r[n.str]=(r[n.str]||0)+1),r),{})}};W._Code=ze;W.nil=new ze("");function Cs(t,...e){let r=[t[0]],n=0;for(;n<e.length;)qa(r,e[n]),r.push(t[++n]);return new ze(r)}W._=Cs;var Va=new ze("+");function ks(t,...e){let r=[Kr(t[0])],n=0;for(;n<e.length;)r.push(Va),qa(r,e[n]),r.push(Va,Kr(t[++n]));return Ju(r),new ze(r)}W.str=ks;function qa(t,e){e instanceof ze?t.push(...e._items):e instanceof Xt?t.push(e):t.push(Yu(e))}W.addCodeArg=qa;function Ju(t){let e=1;for(;e<t.length-1;){if(t[e]===Va){let r=Qu(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Qu(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Xt||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Xt))return`"${t}${e.slice(1)}`}function Xu(t,e){return e.emptyStr()?t:t.emptyStr()?e:ks`${t}${e}`}W.strConcat=Xu;function Yu(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Kr(Array.isArray(t)?t.join(","):t)}function Zu(t){return new ze(Kr(t))}W.stringify=Zu;function Kr(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}W.safeStringify=Kr;function ed(t){return typeof t=="string"&&W.IDENTIFIER.test(t)?new ze(`.${t}`):Cs`[${t}]`}W.getProperty=ed;function td(t){if(typeof t=="string"&&W.IDENTIFIER.test(t))return new ze(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}W.getEsmExportName=td;function rd(t){return new ze(t.toString())}W.regexpCode=rd});var za=R(Re=>{"use strict";f();Object.defineProperty(Re,"__esModule",{value:!0});Re.ValueScope=Re.ValueScopeName=Re.Scope=Re.varKinds=Re.UsedValueState=void 0;var Ne=Hr(),Ma=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},xa;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(xa=Re.UsedValueState||(Re.UsedValueState={}));Re.varKinds={const:new Ne.Name("const"),let:new Ne.Name("let"),var:new Ne.Name("var")};var xn=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Ne.Name?e:this.name(e)}name(e){return new Ne.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Re.Scope=xn;var Fn=class extends Ne.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Ne._)`.${new Ne.Name(r)}[${n}]`}};Re.ValueScopeName=Fn;var nd=(0,Ne._)`\n`,Fa=class extends xn{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=ue(k({},e),{_n:e.lines?nd:Ne.nil})}get(){return this._scope}name(e){return new Fn(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let a=this.toName(e),{prefix:i}=a,o=(n=r.key)!==null&&n!==void 0?n:r.ref,s=this._values[i];if(s){let m=s.get(o);if(m)return m}else s=this._values[i]=new Map;s.set(o,a);let u=this._scope[i]||(this._scope[i]=[]),p=u.length;return u[p]=r.ref,a.setValue(r,{property:i,itemIndex:p}),a}getValue(e,r){let n=this._values[e];if(!!n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Ne._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,a=>{if(a.value===void 0)throw new Error(`CodeGen: name "${a}" has no value`);return a.value.code},r,n)}_reduceValues(e,r,n={},a){let i=Ne.nil;for(let o in e){let s=e[o];if(!s)continue;let u=n[o]=n[o]||new Map;s.forEach(p=>{if(u.has(p))return;u.set(p,xa.Started);let m=r(p);if(m){let h=this.opts.es5?Re.varKinds.var:Re.varKinds.const;i=(0,Ne._)`${i}${h} ${p} = ${m};${this.opts._n}`}else if(m=a==null?void 0:a(p))i=(0,Ne._)`${i}${m}${this.opts._n}`;else throw new Ma(p);u.set(p,xa.Completed)})}return i}};Re.ValueScope=Fa});var U=R(F=>{"use strict";f();Object.defineProperty(F,"__esModule",{value:!0});F.or=F.and=F.not=F.CodeGen=F.operators=F.varKinds=F.ValueScopeName=F.ValueScope=F.Scope=F.Name=F.regexpCode=F.stringify=F.getProperty=F.nil=F.strConcat=F.str=F._=void 0;var B=Hr(),Je=za(),Dt=Hr();Object.defineProperty(F,"_",{enumerable:!0,get:function(){return Dt._}});Object.defineProperty(F,"str",{enumerable:!0,get:function(){return Dt.str}});Object.defineProperty(F,"strConcat",{enumerable:!0,get:function(){return Dt.strConcat}});Object.defineProperty(F,"nil",{enumerable:!0,get:function(){return Dt.nil}});Object.defineProperty(F,"getProperty",{enumerable:!0,get:function(){return Dt.getProperty}});Object.defineProperty(F,"stringify",{enumerable:!0,get:function(){return Dt.stringify}});Object.defineProperty(F,"regexpCode",{enumerable:!0,get:function(){return Dt.regexpCode}});Object.defineProperty(F,"Name",{enumerable:!0,get:function(){return Dt.Name}});var Bn=za();Object.defineProperty(F,"Scope",{enumerable:!0,get:function(){return Bn.Scope}});Object.defineProperty(F,"ValueScope",{enumerable:!0,get:function(){return Bn.ValueScope}});Object.defineProperty(F,"ValueScopeName",{enumerable:!0,get:function(){return Bn.ValueScopeName}});Object.defineProperty(F,"varKinds",{enumerable:!0,get:function(){return Bn.varKinds}});F.operators={GT:new B._Code(">"),GTE:new B._Code(">="),LT:new B._Code("<"),LTE:new B._Code("<="),EQ:new B._Code("==="),NEQ:new B._Code("!=="),NOT:new B._Code("!"),OR:new B._Code("||"),AND:new B._Code("&&"),ADD:new B._Code("+")};var It=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},La=class extends It{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Je.varKinds.var:this.varKind,a=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${a};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=br(this.rhs,e,r)),this}get names(){return this.rhs instanceof B._CodeOrName?this.rhs.names:{}}},zn=class extends It{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof B.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=br(this.rhs,e,r),this}get names(){let e=this.lhs instanceof B.Name?{}:k({},this.lhs.names);return Un(e,this.rhs)}},Ua=class extends zn{constructor(e,r,n,a){super(e,n,a),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ba=class extends It{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Ka=class extends It{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Ha=class extends It{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Ga=class extends It{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=br(this.code,e,r),this}get names(){return this.code instanceof B._CodeOrName?this.code.names:{}}},Gr=class extends It{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,a=n.length;for(;a--;){let i=n[a];i.optimizeNames(e,r)||(ad(e,i.names),n.splice(a,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Zt(e,r.names),{})}},bt=class extends Gr{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Wa=class extends Gr{},Ir=class extends bt{};Ir.kind="else";var Qe=class extends bt{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Ir(n):n}if(r)return e===!1?r instanceof Qe?r:r.nodes:this.nodes.length?this:new Qe(Ns(e),r instanceof Qe?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=br(this.condition,e,r),this}get names(){let e=super.names;return Un(e,this.condition),this.else&&Zt(e,this.else.names),e}};Qe.kind="if";var Yt=class extends bt{};Yt.kind="for";var Ja=class extends Yt{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=br(this.iteration,e,r),this}get names(){return Zt(super.names,this.iteration.names)}},Qa=class extends Yt{constructor(e,r,n,a){super(),this.varKind=e,this.name=r,this.from=n,this.to=a}render(e){let r=e.es5?Je.varKinds.var:this.varKind,{name:n,from:a,to:i}=this;return`for(${r} ${n}=${a}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Un(super.names,this.from);return Un(e,this.to)}},Ln=class extends Yt{constructor(e,r,n,a){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=a}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=br(this.iterable,e,r),this}get names(){return Zt(super.names,this.iterable.names)}},Wr=class extends bt{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Wr.kind="func";var Jr=class extends Gr{render(e){return"return "+super.render(e)}};Jr.kind="return";var Xa=class extends bt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,a;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(a=this.finally)===null||a===void 0||a.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Zt(e,this.catch.names),this.finally&&Zt(e,this.finally.names),e}},Qr=class extends bt{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Qr.kind="catch";var Xr=class extends bt{render(e){return"finally"+super.render(e)}};Xr.kind="finally";var Ya=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=ue(k({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new Je.Scope({parent:e}),this._nodes=[new Wa]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,a){let i=this._scope.toName(r);return n!==void 0&&a&&(this._constants[i.str]=n),this._leafNode(new La(e,i,n)),i}const(e,r,n){return this._def(Je.varKinds.const,e,r,n)}let(e,r,n){return this._def(Je.varKinds.let,e,r,n)}var(e,r,n){return this._def(Je.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new zn(e,r,n))}add(e,r){return this._leafNode(new Ua(e,F.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==B.nil&&this._leafNode(new Ga(e)),this}object(...e){let r=["{"];for(let[n,a]of e)r.length>1&&r.push(","),r.push(n),(n!==a||this.opts.es5)&&(r.push(":"),(0,B.addCodeArg)(r,a));return r.push("}"),new B._Code(r)}if(e,r,n){if(this._blockNode(new Qe(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Qe(e))}else(){return this._elseNode(new Ir)}endIf(){return this._endBlockNode(Qe,Ir)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Ja(e),r)}forRange(e,r,n,a,i=this.opts.es5?Je.varKinds.var:Je.varKinds.let){let o=this._scope.toName(e);return this._for(new Qa(i,o,r,n),()=>a(o))}forOf(e,r,n,a=Je.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof B.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,B._)`${o}.length`,s=>{this.var(i,(0,B._)`${o}[${s}]`),n(i)})}return this._for(new Ln("of",a,i,r),()=>n(i))}forIn(e,r,n,a=this.opts.es5?Je.varKinds.var:Je.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,B._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Ln("in",a,i,r),()=>n(i))}endFor(){return this._endBlockNode(Yt)}label(e){return this._leafNode(new Ba(e))}break(e){return this._leafNode(new Ka(e))}return(e){let r=new Jr;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Jr)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let a=new Xa;if(this._blockNode(a),this.code(e),r){let i=this.name("e");this._currNode=a.catch=new Qr(i),r(i)}return n&&(this._currNode=a.finally=new Xr,this.code(n)),this._endBlockNode(Qr,Xr)}throw(e){return this._leafNode(new Ha(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=B.nil,n,a){return this._blockNode(new Wr(e,r,n)),a&&this.code(a).endFunc(),this}endFunc(){return this._endBlockNode(Wr)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Qe))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};F.CodeGen=Ya;function Zt(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Un(t,e){return e instanceof B._CodeOrName?Zt(t,e.names):t}function br(t,e,r){if(t instanceof B.Name)return n(t);if(!a(t))return t;return new B._Code(t._items.reduce((i,o)=>(o instanceof B.Name&&(o=n(o)),o instanceof B._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function a(i){return i instanceof B._Code&&i._items.some(o=>o instanceof B.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function ad(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Ns(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,B._)`!${Za(t)}`}F.not=Ns;var id=Os(F.operators.AND);function od(...t){return t.reduce(id)}F.and=od;var sd=Os(F.operators.OR);function ld(...t){return t.reduce(sd)}F.or=ld;function Os(t){return(e,r)=>e===B.nil?r:r===B.nil?e:(0,B._)`${Za(e)} ${t} ${Za(r)}`}function Za(t){return t instanceof B.Name?t:(0,B._)`(${t})`}});var J=R(z=>{"use strict";f();Object.defineProperty(z,"__esModule",{value:!0});z.checkStrictMode=z.getErrorPath=z.Type=z.useFunc=z.setEvaluated=z.evaluatedPropsToName=z.mergeEvaluated=z.eachItem=z.unescapeJsonPointer=z.escapeJsonPointer=z.escapeFragment=z.unescapeFragment=z.schemaRefOrVal=z.schemaHasRulesButRef=z.schemaHasRules=z.checkUnknownRules=z.alwaysValidSchema=z.toHash=void 0;var ne=U(),cd=Hr();function ud(t){let e={};for(let r of t)e[r]=!0;return e}z.toHash=ud;function dd(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(js(t,e),!Vs(e,t.self.RULES.all))}z.alwaysValidSchema=dd;function js(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let a=n.RULES.keywords;for(let i in e)a[i]||Fs(t,`unknown keyword: "${i}"`)}z.checkUnknownRules=js;function Vs(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}z.schemaHasRules=Vs;function fd(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}z.schemaHasRulesButRef=fd;function pd({topSchemaRef:t,schemaPath:e},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ne._)`${r}`}return(0,ne._)`${t}${e}${(0,ne.getProperty)(n)}`}z.schemaRefOrVal=pd;function md(t){return qs(decodeURIComponent(t))}z.unescapeFragment=md;function hd(t){return encodeURIComponent(ei(t))}z.escapeFragment=hd;function ei(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}z.escapeJsonPointer=ei;function qs(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}z.unescapeJsonPointer=qs;function gd(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}z.eachItem=gd;function Ds({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(a,i,o,s)=>{let u=o===void 0?i:o instanceof ne.Name?(i instanceof ne.Name?t(a,i,o):e(a,i,o),o):i instanceof ne.Name?(e(a,o,i),i):r(i,o);return s===ne.Name&&!(u instanceof ne.Name)?n(a,u):u}}z.mergeEvaluated={props:Ds({mergeNames:(t,e,r)=>t.if((0,ne._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ne._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ne._)`${r} || {}`).code((0,ne._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ne._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ne._)`${r} || {}`),ti(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:k(k({},t),e),resultToName:Ms}),items:Ds({mergeNames:(t,e,r)=>t.if((0,ne._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ne._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ne._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ne._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Ms(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,ne._)`{}`);return e!==void 0&&ti(t,r,e),r}z.evaluatedPropsToName=Ms;function ti(t,e,r){Object.keys(r).forEach(n=>t.assign((0,ne._)`${e}${(0,ne.getProperty)(n)}`,!0))}z.setEvaluated=ti;var As={};function yd(t,e){return t.scopeValue("func",{ref:e,code:As[e.code]||(As[e.code]=new cd._Code(e.code))})}z.useFunc=yd;var xs;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(xs=z.Type||(z.Type={}));function vd(t,e,r){if(t instanceof ne.Name){let n=e===xs.Num;return r?n?(0,ne._)`"[" + ${t} + "]"`:(0,ne._)`"['" + ${t} + "']"`:n?(0,ne._)`"/" + ${t}`:(0,ne._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ne.getProperty)(t).toString():"/"+ei(t)}z.getErrorPath=vd;function Fs(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}z.checkStrictMode=Fs});var Et=R(ri=>{"use strict";f();Object.defineProperty(ri,"__esModule",{value:!0});var Ee=U(),_d={data:new Ee.Name("data"),valCxt:new Ee.Name("valCxt"),instancePath:new Ee.Name("instancePath"),parentData:new Ee.Name("parentData"),parentDataProperty:new Ee.Name("parentDataProperty"),rootData:new Ee.Name("rootData"),dynamicAnchors:new Ee.Name("dynamicAnchors"),vErrors:new Ee.Name("vErrors"),errors:new Ee.Name("errors"),this:new Ee.Name("this"),self:new Ee.Name("self"),scope:new Ee.Name("scope"),json:new Ee.Name("json"),jsonPos:new Ee.Name("jsonPos"),jsonLen:new Ee.Name("jsonLen"),jsonPart:new Ee.Name("jsonPart")};ri.default=_d});var Yr=R(Pe=>{"use strict";f();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.extendErrors=Pe.resetErrorsCount=Pe.reportExtraError=Pe.reportError=Pe.keyword$DataError=Pe.keywordError=void 0;var H=U(),Kn=J(),Te=Et();Pe.keywordError={message:({keyword:t})=>(0,H.str)`must pass "${t}" keyword validation`};Pe.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,H.str)`"${t}" keyword must be ${e} ($data)`:(0,H.str)`"${t}" keyword is invalid ($data)`};function $d(t,e=Pe.keywordError,r,n){let{it:a}=t,{gen:i,compositeRule:o,allErrors:s}=a,u=Us(t,e,r);(n!=null?n:o||s)?zs(i,u):Ls(a,(0,H._)`[${u}]`)}Pe.reportError=$d;function wd(t,e=Pe.keywordError,r){let{it:n}=t,{gen:a,compositeRule:i,allErrors:o}=n,s=Us(t,e,r);zs(a,s),i||o||Ls(n,Te.default.vErrors)}Pe.reportExtraError=wd;function Sd(t,e){t.assign(Te.default.errors,e),t.if((0,H._)`${Te.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,H._)`${Te.default.vErrors}.length`,e),()=>t.assign(Te.default.vErrors,null)))}Pe.resetErrorsCount=Sd;function Id({gen:t,keyword:e,schemaValue:r,data:n,errsCount:a,it:i}){if(a===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",a,Te.default.errors,s=>{t.const(o,(0,H._)`${Te.default.vErrors}[${s}]`),t.if((0,H._)`${o}.instancePath === undefined`,()=>t.assign((0,H._)`${o}.instancePath`,(0,H.strConcat)(Te.default.instancePath,i.errorPath))),t.assign((0,H._)`${o}.schemaPath`,(0,H.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,H._)`${o}.schema`,r),t.assign((0,H._)`${o}.data`,n))})}Pe.extendErrors=Id;function zs(t,e){let r=t.const("err",e);t.if((0,H._)`${Te.default.vErrors} === null`,()=>t.assign(Te.default.vErrors,(0,H._)`[${r}]`),(0,H._)`${Te.default.vErrors}.push(${r})`),t.code((0,H._)`${Te.default.errors}++`)}function Ls(t,e){let{gen:r,validateName:n,schemaEnv:a}=t;a.$async?r.throw((0,H._)`new ${t.ValidationError}(${e})`):(r.assign((0,H._)`${n}.errors`,e),r.return(!1))}var er={keyword:new H.Name("keyword"),schemaPath:new H.Name("schemaPath"),params:new H.Name("params"),propertyName:new H.Name("propertyName"),message:new H.Name("message"),schema:new H.Name("schema"),parentSchema:new H.Name("parentSchema")};function Us(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,H._)`{}`:bd(t,e,r)}function bd(t,e,r={}){let{gen:n,it:a}=t,i=[Ed(a,r),Pd(t,r)];return Rd(t,e,i),n.object(...i)}function Ed({errorPath:t},{instancePath:e}){let r=e?(0,H.str)`${t}${(0,Kn.getErrorPath)(e,Kn.Type.Str)}`:t;return[Te.default.instancePath,(0,H.strConcat)(Te.default.instancePath,r)]}function Pd({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let a=n?e:(0,H.str)`${e}/${t}`;return r&&(a=(0,H.str)`${a}${(0,Kn.getErrorPath)(r,Kn.Type.Str)}`),[er.schemaPath,a]}function Rd(t,{params:e,message:r},n){let{keyword:a,data:i,schemaValue:o,it:s}=t,{opts:u,propertyName:p,topSchemaRef:m,schemaPath:h}=s;n.push([er.keyword,a],[er.params,typeof e=="function"?e(t):e||(0,H._)`{}`]),u.messages&&n.push([er.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([er.schema,o],[er.parentSchema,(0,H._)`${m}${h}`],[Te.default.data,i]),p&&n.push([er.propertyName,p])}});var Ks=R(Er=>{"use strict";f();Object.defineProperty(Er,"__esModule",{value:!0});Er.boolOrEmptySchema=Er.topBoolOrEmptySchema=void 0;var Td=Yr(),Cd=U(),kd=Et(),Nd={message:"boolean schema is false"};function Od(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Bs(t,!1):typeof r=="object"&&r.$async===!0?e.return(kd.default.data):(e.assign((0,Cd._)`${n}.errors`,null),e.return(!0))}Er.topBoolOrEmptySchema=Od;function Dd(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Bs(t)):r.var(e,!0)}Er.boolOrEmptySchema=Dd;function Bs(t,e){let{gen:r,data:n}=t,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Td.reportError)(a,Nd,void 0,e)}});var ni=R(Pr=>{"use strict";f();Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getRules=Pr.isJSONType=void 0;var Ad=["string","number","integer","boolean","null","object","array"],jd=new Set(Ad);function Vd(t){return typeof t=="string"&&jd.has(t)}Pr.isJSONType=Vd;function qd(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:ue(k({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Pr.getRules=qd});var ai=R(At=>{"use strict";f();Object.defineProperty(At,"__esModule",{value:!0});At.shouldUseRule=At.shouldUseGroup=At.schemaHasRulesForType=void 0;function Md({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Hs(t,n)}At.schemaHasRulesForType=Md;function Hs(t,e){return e.rules.some(r=>Gs(t,r))}At.shouldUseGroup=Hs;function Gs(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}At.shouldUseRule=Gs});var en=R(_e=>{"use strict";f();Object.defineProperty(_e,"__esModule",{value:!0});_e.reportTypeError=_e.checkDataTypes=_e.checkDataType=_e.coerceAndCheckDataType=_e.getJSONTypes=_e.getSchemaTypes=_e.DataType=void 0;var xd=ni(),Fd=ai(),zd=Yr(),A=U(),Ws=J(),Zr;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Zr=_e.DataType||(_e.DataType={}));function Ld(t){let e=Js(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}_e.getSchemaTypes=Ld;function Js(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(xd.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}_e.getJSONTypes=Js;function Ud(t,e){let{gen:r,data:n,opts:a}=t,i=Bd(e,a.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Fd.schemaHasRulesForType)(t,e[0]));if(o){let s=oi(e,n,a.strictNumbers,Zr.Wrong);r.if(s,()=>{i.length?Kd(t,e,i):si(t)})}return o}_e.coerceAndCheckDataType=Ud;var Qs=new Set(["string","number","integer","boolean","null"]);function Bd(t,e){return e?t.filter(r=>Qs.has(r)||e==="array"&&r==="array"):[]}function Kd(t,e,r){let{gen:n,data:a,opts:i}=t,o=n.let("dataType",(0,A._)`typeof ${a}`),s=n.let("coerced",(0,A._)`undefined`);i.coerceTypes==="array"&&n.if((0,A._)`${o} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,A._)`${a}[0]`).assign(o,(0,A._)`typeof ${a}`).if(oi(e,a,i.strictNumbers),()=>n.assign(s,a))),n.if((0,A._)`${s} !== undefined`);for(let p of r)(Qs.has(p)||p==="array"&&i.coerceTypes==="array")&&u(p);n.else(),si(t),n.endIf(),n.if((0,A._)`${s} !== undefined`,()=>{n.assign(a,s),Hd(t,s)});function u(p){switch(p){case"string":n.elseIf((0,A._)`${o} == "number" || ${o} == "boolean"`).assign(s,(0,A._)`"" + ${a}`).elseIf((0,A._)`${a} === null`).assign(s,(0,A._)`""`);return;case"number":n.elseIf((0,A._)`${o} == "boolean" || ${a} === null
              || (${o} == "string" && ${a} && ${a} == +${a})`).assign(s,(0,A._)`+${a}`);return;case"integer":n.elseIf((0,A._)`${o} === "boolean" || ${a} === null
              || (${o} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(s,(0,A._)`+${a}`);return;case"boolean":n.elseIf((0,A._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(s,!1).elseIf((0,A._)`${a} === "true" || ${a} === 1`).assign(s,!0);return;case"null":n.elseIf((0,A._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(s,null);return;case"array":n.elseIf((0,A._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${a} === null`).assign(s,(0,A._)`[${a}]`)}}}function Hd({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,A._)`${e} !== undefined`,()=>t.assign((0,A._)`${e}[${r}]`,n))}function ii(t,e,r,n=Zr.Correct){let a=n===Zr.Correct?A.operators.EQ:A.operators.NEQ,i;switch(t){case"null":return(0,A._)`${e} ${a} null`;case"array":i=(0,A._)`Array.isArray(${e})`;break;case"object":i=(0,A._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,A._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,A._)`typeof ${e} ${a} ${t}`}return n===Zr.Correct?i:(0,A.not)(i);function o(s=A.nil){return(0,A.and)((0,A._)`typeof ${e} == "number"`,s,r?(0,A._)`isFinite(${e})`:A.nil)}}_e.checkDataType=ii;function oi(t,e,r,n){if(t.length===1)return ii(t[0],e,r,n);let a,i=(0,Ws.toHash)(t);if(i.array&&i.object){let o=(0,A._)`typeof ${e} != "object"`;a=i.null?o:(0,A._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else a=A.nil;i.number&&delete i.integer;for(let o in i)a=(0,A.and)(a,ii(o,e,r,n));return a}_e.checkDataTypes=oi;var Gd={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,A._)`{type: ${t}}`:(0,A._)`{type: ${e}}`};function si(t){let e=Wd(t);(0,zd.reportError)(e,Gd)}_e.reportTypeError=si;function Wd(t){let{gen:e,data:r,schema:n}=t,a=(0,Ws.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:t}}});var Ys=R(Hn=>{"use strict";f();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.assignDefaults=void 0;var Rr=U(),Jd=J();function Qd(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let a in r)Xs(t,a,r[a].default);else e==="array"&&Array.isArray(n)&&n.forEach((a,i)=>Xs(t,i,a.default))}Hn.assignDefaults=Qd;function Xs(t,e,r){let{gen:n,compositeRule:a,data:i,opts:o}=t;if(r===void 0)return;let s=(0,Rr._)`${i}${(0,Rr.getProperty)(e)}`;if(a){(0,Jd.checkStrictMode)(t,`default is ignored for: ${s}`);return}let u=(0,Rr._)`${s} === undefined`;o.useDefaults==="empty"&&(u=(0,Rr._)`${u} || ${s} === null || ${s} === ""`),n.if(u,(0,Rr._)`${s} = ${(0,Rr.stringify)(r)}`)}});var Le=R(te=>{"use strict";f();Object.defineProperty(te,"__esModule",{value:!0});te.validateUnion=te.validateArray=te.usePattern=te.callValidateCode=te.schemaProperties=te.allSchemaProperties=te.noPropertyInData=te.propertyInData=te.isOwnProperty=te.hasPropFunc=te.reportMissingProp=te.checkMissingProp=te.checkReportMissingProp=void 0;var ie=U(),li=J(),jt=Et(),Xd=J();function Yd(t,e){let{gen:r,data:n,it:a}=t;r.if(ui(r,n,e,a.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ie._)`${e}`},!0),t.error()})}te.checkReportMissingProp=Yd;function Zd({gen:t,data:e,it:{opts:r}},n,a){return(0,ie.or)(...n.map(i=>(0,ie.and)(ui(t,e,i,r.ownProperties),(0,ie._)`${a} = ${i}`)))}te.checkMissingProp=Zd;function ef(t,e){t.setParams({missingProperty:e},!0),t.error()}te.reportMissingProp=ef;function Zs(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ie._)`Object.prototype.hasOwnProperty`})}te.hasPropFunc=Zs;function ci(t,e,r){return(0,ie._)`${Zs(t)}.call(${e}, ${r})`}te.isOwnProperty=ci;function tf(t,e,r,n){let a=(0,ie._)`${e}${(0,ie.getProperty)(r)} !== undefined`;return n?(0,ie._)`${a} && ${ci(t,e,r)}`:a}te.propertyInData=tf;function ui(t,e,r,n){let a=(0,ie._)`${e}${(0,ie.getProperty)(r)} === undefined`;return n?(0,ie.or)(a,(0,ie.not)(ci(t,e,r))):a}te.noPropertyInData=ui;function el(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}te.allSchemaProperties=el;function rf(t,e){return el(e).filter(r=>!(0,li.alwaysValidSchema)(t,e[r]))}te.schemaProperties=rf;function nf({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:i},it:o},s,u,p){let m=p?(0,ie._)`${t}, ${e}, ${n}${a}`:e,h=[[jt.default.instancePath,(0,ie.strConcat)(jt.default.instancePath,i)],[jt.default.parentData,o.parentData],[jt.default.parentDataProperty,o.parentDataProperty],[jt.default.rootData,jt.default.rootData]];o.opts.dynamicRef&&h.push([jt.default.dynamicAnchors,jt.default.dynamicAnchors]);let $=(0,ie._)`${m}, ${r.object(...h)}`;return u!==ie.nil?(0,ie._)`${s}.call(${u}, ${$})`:(0,ie._)`${s}(${$})`}te.callValidateCode=nf;var af=(0,ie._)`new RegExp`;function of({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:a}=e.code,i=a(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ie._)`${a.code==="new RegExp"?af:(0,Xd.useFunc)(t,a)}(${r}, ${n})`})}te.usePattern=of;function sf(t){let{gen:e,data:r,keyword:n,it:a}=t,i=e.name("valid");if(a.allErrors){let s=e.let("valid",!0);return o(()=>e.assign(s,!1)),s}return e.var(i,!0),o(()=>e.break()),i;function o(s){let u=e.const("len",(0,ie._)`${r}.length`);e.forRange("i",0,u,p=>{t.subschema({keyword:n,dataProp:p,dataPropType:li.Type.Num},i),e.if((0,ie.not)(i),s)})}}te.validateArray=sf;function lf(t){let{gen:e,schema:r,keyword:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,li.alwaysValidSchema)(a,u))&&!a.opts.unevaluated)return;let o=e.let("valid",!1),s=e.name("_valid");e.block(()=>r.forEach((u,p)=>{let m=t.subschema({keyword:n,schemaProp:p,compositeRule:!0},s);e.assign(o,(0,ie._)`${o} || ${s}`),t.mergeValidEvaluated(m,s)||e.if((0,ie.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}te.validateUnion=lf});var nl=R(dt=>{"use strict";f();Object.defineProperty(dt,"__esModule",{value:!0});dt.validateKeywordUsage=dt.validSchemaType=dt.funcKeywordCode=dt.macroKeywordCode=void 0;var Ce=U(),tr=Et(),cf=Le(),uf=Yr();function df(t,e){let{gen:r,keyword:n,schema:a,parentSchema:i,it:o}=t,s=e.macro.call(o.self,a,i,o),u=rl(r,n,s);o.opts.validateSchema!==!1&&o.self.validateSchema(s,!0);let p=r.name("valid");t.subschema({schema:s,schemaPath:Ce.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},p),t.pass(p,()=>t.error(!0))}dt.macroKeywordCode=df;function ff(t,e){var r;let{gen:n,keyword:a,schema:i,parentSchema:o,$data:s,it:u}=t;mf(u,e);let p=!s&&e.compile?e.compile.call(u.self,i,o,u):e.validate,m=rl(n,a,p),h=n.let("valid");t.block$data(h,$),t.ok((r=e.valid)!==null&&r!==void 0?r:h);function $(){if(e.errors===!1)_(),e.modifying&&tl(t),S(()=>t.error());else{let b=e.async?w():v();e.modifying&&tl(t),S(()=>pf(t,b))}}function w(){let b=n.let("ruleErrs",null);return n.try(()=>_((0,Ce._)`await `),j=>n.assign(h,!1).if((0,Ce._)`${j} instanceof ${u.ValidationError}`,()=>n.assign(b,(0,Ce._)`${j}.errors`),()=>n.throw(j))),b}function v(){let b=(0,Ce._)`${m}.errors`;return n.assign(b,null),_(Ce.nil),b}function _(b=e.async?(0,Ce._)`await `:Ce.nil){let j=u.opts.passContext?tr.default.this:tr.default.self,D=!("compile"in e&&!s||e.schema===!1);n.assign(h,(0,Ce._)`${b}${(0,cf.callValidateCode)(t,m,j,D)}`,e.modifying)}function S(b){var j;n.if((0,Ce.not)((j=e.valid)!==null&&j!==void 0?j:h),b)}}dt.funcKeywordCode=ff;function tl(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Ce._)`${n.parentData}[${n.parentDataProperty}]`))}function pf(t,e){let{gen:r}=t;r.if((0,Ce._)`Array.isArray(${e})`,()=>{r.assign(tr.default.vErrors,(0,Ce._)`${tr.default.vErrors} === null ? ${e} : ${tr.default.vErrors}.concat(${e})`).assign(tr.default.errors,(0,Ce._)`${tr.default.vErrors}.length`),(0,uf.extendErrors)(t)},()=>t.error())}function mf({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function rl(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ce.stringify)(r)})}function hf(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}dt.validSchemaType=hf;function gf({schema:t,opts:e,self:r,errSchemaPath:n},a,i){if(Array.isArray(a.keyword)?!a.keyword.includes(i):a.keyword!==i)throw new Error("ajv implementation error");let o=a.dependencies;if(o!=null&&o.some(s=>!Object.prototype.hasOwnProperty.call(t,s)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(a.validateSchema&&!a.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}dt.validateKeywordUsage=gf});var il=R(Vt=>{"use strict";f();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.extendSubschemaMode=Vt.extendSubschemaData=Vt.getSubschema=void 0;var ft=U(),al=J();function yf(t,{keyword:e,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let s=t.schema[e];return r===void 0?{schema:s,schemaPath:(0,ft._)`${t.schemaPath}${(0,ft.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:s[r],schemaPath:(0,ft._)`${t.schemaPath}${(0,ft.getProperty)(e)}${(0,ft.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,al.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Vt.getSubschema=yf;function vf(t,e,{dataProp:r,dataPropType:n,data:a,dataTypes:i,propertyName:o}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:s}=e;if(r!==void 0){let{errorPath:p,dataPathArr:m,opts:h}=e,$=s.let("data",(0,ft._)`${e.data}${(0,ft.getProperty)(r)}`,!0);u($),t.errorPath=(0,ft.str)`${p}${(0,al.getErrorPath)(r,n,h.jsPropertySyntax)}`,t.parentDataProperty=(0,ft._)`${r}`,t.dataPathArr=[...m,t.parentDataProperty]}if(a!==void 0){let p=a instanceof ft.Name?a:s.let("data",a,!0);u(p),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(p){t.data=p,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,p]}}Vt.extendSubschemaData=vf;function _f(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:i}){n!==void 0&&(t.compositeRule=n),a!==void 0&&(t.createErrors=a),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Vt.extendSubschemaMode=_f});var sl=R((Uy,ol)=>{"use strict";f();var qt=ol.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};Gn(e,n,a,t,"",t)};qt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};qt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};qt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};qt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Gn(t,e,r,n,a,i,o,s,u,p){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,a,i,o,s,u,p);for(var m in n){var h=n[m];if(Array.isArray(h)){if(m in qt.arrayKeywords)for(var $=0;$<h.length;$++)Gn(t,e,r,h[$],a+"/"+m+"/"+$,i,a,m,n,$)}else if(m in qt.propsKeywords){if(h&&typeof h=="object")for(var w in h)Gn(t,e,r,h[w],a+"/"+m+"/"+$f(w),i,a,m,n,w)}else(m in qt.keywords||t.allKeys&&!(m in qt.skipKeywords))&&Gn(t,e,r,h,a+"/"+m,i,a,m,n)}r(n,a,i,o,s,u,p)}}function $f(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var tn=R(Oe=>{"use strict";f();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getSchemaRefs=Oe.resolveUrl=Oe.normalizeId=Oe._getFullPath=Oe.getFullPath=Oe.inlineRef=void 0;var wf=J(),Sf=Bo(),If=sl(),bf=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ef(t,e=!0){return typeof t=="boolean"?!0:e===!0?!di(t):e?ll(t)<=e:!1}Oe.inlineRef=Ef;var Pf=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function di(t){for(let e in t){if(Pf.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(di)||typeof r=="object"&&di(r))return!0}return!1}function ll(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!bf.has(r)&&(typeof t[r]=="object"&&(0,wf.eachItem)(t[r],n=>e+=ll(n)),e===1/0))return 1/0}return e}function cl(t,e="",r){r!==!1&&(e=Tr(e));let n=t.parse(e);return ul(t,n)}Oe.getFullPath=cl;function ul(t,e){return t.serialize(e).split("#")[0]+"#"}Oe._getFullPath=ul;var Rf=/#\/?$/;function Tr(t){return t?t.replace(Rf,""):""}Oe.normalizeId=Tr;function Tf(t,e,r){return r=Tr(r),t.resolve(e,r)}Oe.resolveUrl=Tf;var Cf=/^[a-z_][-a-z0-9._]*$/i;function kf(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,a=Tr(t[r]||e),i={"":a},o=cl(n,a,!1),s={},u=new Set;return If(t,{allKeys:!0},(h,$,w,v)=>{if(v===void 0)return;let _=o+$,S=i[v];typeof h[r]=="string"&&(S=b.call(this,h[r])),j.call(this,h.$anchor),j.call(this,h.$dynamicAnchor),i[$]=S;function b(D){let V=this.opts.uriResolver.resolve;if(D=Tr(S?V(S,D):D),u.has(D))throw m(D);u.add(D);let T=this.refs[D];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?p(h,T.schema,D):D!==Tr(_)&&(D[0]==="#"?(p(h,s[D],D),s[D]=h):this.refs[D]=_),D}function j(D){if(typeof D=="string"){if(!Cf.test(D))throw new Error(`invalid anchor "${D}"`);b.call(this,`#${D}`)}}}),s;function p(h,$,w){if($!==void 0&&!Sf(h,$))throw m(w)}function m(h){return new Error(`reference "${h}" resolves to more than one schema`)}}Oe.getSchemaRefs=kf});var an=R(Mt=>{"use strict";f();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.getData=Mt.KeywordCxt=Mt.validateFunctionCode=void 0;var gl=Ks(),dl=en(),pi=ai(),Wn=en(),Nf=Ys(),nn=nl(),fi=il(),C=U(),N=Et(),Of=tn(),Pt=J(),rn=Yr();function Df(t){if(_l(t)&&($l(t),vl(t))){Vf(t);return}yl(t,()=>(0,gl.topBoolOrEmptySchema)(t))}Mt.validateFunctionCode=Df;function yl({gen:t,validateName:e,schema:r,schemaEnv:n,opts:a},i){a.code.es5?t.func(e,(0,C._)`${N.default.data}, ${N.default.valCxt}`,n.$async,()=>{t.code((0,C._)`"use strict"; ${fl(r,a)}`),jf(t,a),t.code(i)}):t.func(e,(0,C._)`${N.default.data}, ${Af(a)}`,n.$async,()=>t.code(fl(r,a)).code(i))}function Af(t){return(0,C._)`{${N.default.instancePath}="", ${N.default.parentData}, ${N.default.parentDataProperty}, ${N.default.rootData}=${N.default.data}${t.dynamicRef?(0,C._)`, ${N.default.dynamicAnchors}={}`:C.nil}}={}`}function jf(t,e){t.if(N.default.valCxt,()=>{t.var(N.default.instancePath,(0,C._)`${N.default.valCxt}.${N.default.instancePath}`),t.var(N.default.parentData,(0,C._)`${N.default.valCxt}.${N.default.parentData}`),t.var(N.default.parentDataProperty,(0,C._)`${N.default.valCxt}.${N.default.parentDataProperty}`),t.var(N.default.rootData,(0,C._)`${N.default.valCxt}.${N.default.rootData}`),e.dynamicRef&&t.var(N.default.dynamicAnchors,(0,C._)`${N.default.valCxt}.${N.default.dynamicAnchors}`)},()=>{t.var(N.default.instancePath,(0,C._)`""`),t.var(N.default.parentData,(0,C._)`undefined`),t.var(N.default.parentDataProperty,(0,C._)`undefined`),t.var(N.default.rootData,N.default.data),e.dynamicRef&&t.var(N.default.dynamicAnchors,(0,C._)`{}`)})}function Vf(t){let{schema:e,opts:r,gen:n}=t;yl(t,()=>{r.$comment&&e.$comment&&Sl(t),zf(t),n.let(N.default.vErrors,null),n.let(N.default.errors,0),r.unevaluated&&qf(t),wl(t),Bf(t)})}function qf(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,C._)`${r}.evaluated`),e.if((0,C._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,C._)`${t.evaluated}.props`,(0,C._)`undefined`)),e.if((0,C._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,C._)`${t.evaluated}.items`,(0,C._)`undefined`))}function fl(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,C._)`/*# sourceURL=${r} */`:C.nil}function Mf(t,e){if(_l(t)&&($l(t),vl(t))){xf(t,e);return}(0,gl.boolOrEmptySchema)(t,e)}function vl({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function _l(t){return typeof t.schema!="boolean"}function xf(t,e){let{schema:r,gen:n,opts:a}=t;a.$comment&&r.$comment&&Sl(t),Lf(t),Uf(t);let i=n.const("_errs",N.default.errors);wl(t,i),n.var(e,(0,C._)`${i} === ${N.default.errors}`)}function $l(t){(0,Pt.checkUnknownRules)(t),Ff(t)}function wl(t,e){if(t.opts.jtd)return pl(t,[],!1,e);let r=(0,dl.getSchemaTypes)(t.schema),n=(0,dl.coerceAndCheckDataType)(t,r);pl(t,r,!n,e)}function Ff(t){let{schema:e,errSchemaPath:r,opts:n,self:a}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Pt.schemaHasRulesButRef)(e,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function zf(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Pt.checkStrictMode)(t,"default is ignored in the schema root")}function Lf(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Of.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Uf(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Sl({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:a}){let i=r.$comment;if(a.$comment===!0)t.code((0,C._)`${N.default.self}.logger.log(${i})`);else if(typeof a.$comment=="function"){let o=(0,C.str)`${n}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code((0,C._)`${N.default.self}.opts.$comment(${i}, ${o}, ${s}.schema)`)}}function Bf(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:a,opts:i}=t;r.$async?e.if((0,C._)`${N.default.errors} === 0`,()=>e.return(N.default.data),()=>e.throw((0,C._)`new ${a}(${N.default.vErrors})`)):(e.assign((0,C._)`${n}.errors`,N.default.vErrors),i.unevaluated&&Kf(t),e.return((0,C._)`${N.default.errors} === 0`))}function Kf({gen:t,evaluated:e,props:r,items:n}){r instanceof C.Name&&t.assign((0,C._)`${e}.props`,r),n instanceof C.Name&&t.assign((0,C._)`${e}.items`,n)}function pl(t,e,r,n){let{gen:a,schema:i,data:o,allErrors:s,opts:u,self:p}=t,{RULES:m}=p;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Pt.schemaHasRulesButRef)(i,m))){a.block(()=>Il(t,"$ref",m.all.$ref.definition));return}u.jtd||Hf(t,e),a.block(()=>{for(let $ of m.rules)h($);h(m.post)});function h($){!(0,pi.shouldUseGroup)(i,$)||($.type?(a.if((0,Wn.checkDataType)($.type,o,u.strictNumbers)),ml(t,$),e.length===1&&e[0]===$.type&&r&&(a.else(),(0,Wn.reportTypeError)(t)),a.endIf()):ml(t,$),s||a.if((0,C._)`${N.default.errors} === ${n||0}`))}}function ml(t,e){let{gen:r,schema:n,opts:{useDefaults:a}}=t;a&&(0,Nf.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,pi.shouldUseRule)(n,i)&&Il(t,i.keyword,i.definition,e.type)})}function Hf(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Gf(t,e),t.opts.allowUnionTypes||Wf(t,e),Jf(t,t.dataTypes))}function Gf(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{hl(t.dataTypes,r)||mi(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>hl(e,r))}}function Wf(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&mi(t,"use allowUnionTypes to allow union type keyword")}function Jf(t,e){let r=t.self.RULES.all;for(let n in r){let a=r[n];if(typeof a=="object"&&(0,pi.shouldUseRule)(t.schema,a)){let{type:i}=a.definition;i.length&&!i.some(o=>Qf(e,o))&&mi(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Qf(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function hl(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function mi(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,(0,Pt.checkStrictMode)(t,e,t.opts.strictTypes)}var Jn=class{constructor(e,r,n){if((0,nn.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Pt.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",bl(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,nn.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",N.default.errors))}result(e,r,n){this.failResult((0,C.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,C.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,C._)`${r} !== undefined && (${(0,C.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?rn.reportExtraError:rn.reportError)(this,this.def.error,r)}$dataError(){(0,rn.reportError)(this,this.def.$dataError||rn.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,rn.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=C.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=C.nil,r=C.nil){if(!this.$data)return;let{gen:n,schemaCode:a,schemaType:i,def:o}=this;n.if((0,C.or)((0,C._)`${a} === undefined`,r)),e!==C.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==C.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:a,it:i}=this;return(0,C.or)(o(),s());function o(){if(n.length){if(!(r instanceof C.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,C._)`${(0,Wn.checkDataTypes)(u,r,i.opts.strictNumbers,Wn.DataType.Wrong)}`}return C.nil}function s(){if(a.validateSchema){let u=e.scopeValue("validate$data",{ref:a.validateSchema});return(0,C._)`!${u}(${r})`}return C.nil}}subschema(e,r){let n=(0,fi.getSubschema)(this.it,e);(0,fi.extendSubschemaData)(n,this.it,e),(0,fi.extendSubschemaMode)(n,e);let a=ue(k(k({},this.it),n),{items:void 0,props:void 0});return Mf(a,r),a}mergeEvaluated(e,r){let{it:n,gen:a}=this;!n.opts.unevaluated||(n.props!==!0&&e.props!==void 0&&(n.props=Pt.mergeEvaluated.props(a,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Pt.mergeEvaluated.items(a,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(e,C.Name)),!0}};Mt.KeywordCxt=Jn;function Il(t,e,r,n){let a=new Jn(t,r,e);"code"in r?r.code(a,n):a.$data&&r.validate?(0,nn.funcKeywordCode)(a,r):"macro"in r?(0,nn.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,nn.funcKeywordCode)(a,r)}var Xf=/^\/(?:[^~]|~0|~1)*$/,Yf=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bl(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let a,i;if(t==="")return N.default.rootData;if(t[0]==="/"){if(!Xf.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);a=t,i=N.default.rootData}else{let p=Yf.exec(t);if(!p)throw new Error(`Invalid JSON-pointer: ${t}`);let m=+p[1];if(a=p[2],a==="#"){if(m>=e)throw new Error(u("property/index",m));return n[e-m]}if(m>e)throw new Error(u("data",m));if(i=r[e-m],!a)return i}let o=i,s=a.split("/");for(let p of s)p&&(i=(0,C._)`${i}${(0,C.getProperty)((0,Pt.unescapeJsonPointer)(p))}`,o=(0,C._)`${o} && ${i}`);return o;function u(p,m){return`Cannot access ${p} ${m} levels up, current level is ${e}`}}Mt.getData=bl});var yi=R(gi=>{"use strict";f();Object.defineProperty(gi,"__esModule",{value:!0});var hi=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};gi.default=hi});var wi=R($i=>{"use strict";f();Object.defineProperty($i,"__esModule",{value:!0});var vi=tn(),_i=class extends Error{constructor(e,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,vi.resolveUrl)(e,r,n),this.missingSchema=(0,vi.normalizeId)((0,vi.getFullPath)(e,this.missingRef))}};$i.default=_i});var Xn=R(Ue=>{"use strict";f();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.resolveSchema=Ue.getCompilingSchema=Ue.resolveRef=Ue.compileSchema=Ue.SchemaEnv=void 0;var Xe=U(),Zf=yi(),rr=Et(),Ye=tn(),El=J(),ep=an(),Cr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ye.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Ue.SchemaEnv=Cr;function Ii(t){let e=Pl.call(this,t);if(e)return e;let r=(0,Ye.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:i}=this.opts,o=new Xe.CodeGen(this.scope,{es5:n,lines:a,ownProperties:i}),s;t.$async&&(s=o.scopeValue("Error",{ref:Zf.default,code:(0,Xe._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let p={gen:o,allErrors:this.opts.allErrors,data:rr.default.data,parentData:rr.default.parentData,parentDataProperty:rr.default.parentDataProperty,dataNames:[rr.default.data],dataPathArr:[Xe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Xe.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:s,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Xe.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xe._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(t),(0,ep.validateFunctionCode)(p),o.optimize(this.opts.code.optimize);let h=o.toString();m=`${o.scopeRefs(rr.default.scope)}return ${h}`,this.opts.code.process&&(m=this.opts.code.process(m,t));let w=new Function(`${rr.default.self}`,`${rr.default.scope}`,m)(this,this.scope.get());if(this.scope.value(u,{ref:w}),w.errors=null,w.schema=t.schema,w.schemaEnv=t,t.$async&&(w.$async=!0),this.opts.code.source===!0&&(w.source={validateName:u,validateCode:h,scopeValues:o._values}),this.opts.unevaluated){let{props:v,items:_}=p;w.evaluated={props:v instanceof Xe.Name?void 0:v,items:_ instanceof Xe.Name?void 0:_,dynamicProps:v instanceof Xe.Name,dynamicItems:_ instanceof Xe.Name},w.source&&(w.source.evaluated=(0,Xe.stringify)(w.evaluated))}return t.validate=w,t}catch(h){throw delete t.validate,delete t.validateName,m&&this.logger.error("Error compiling schema, function code:",m),h}finally{this._compilations.delete(t)}}Ue.compileSchema=Ii;function tp(t,e,r){var n;r=(0,Ye.resolveUrl)(this.opts.uriResolver,e,r);let a=t.refs[r];if(a)return a;let i=ap.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:s}=this.opts;o&&(i=new Cr({schema:o,schemaId:s,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=rp.call(this,i)}Ue.resolveRef=tp;function rp(t){return(0,Ye.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Ii.call(this,t)}function Pl(t){for(let e of this._compilations)if(np(e,t))return e}Ue.getCompilingSchema=Pl;function np(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function ap(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Qn.call(this,t,e)}function Qn(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ye._getFullPath)(this.opts.uriResolver,r),a=(0,Ye.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===a)return Si.call(this,r,t);let i=(0,Ye.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let s=Qn.call(this,t,o);return typeof(s==null?void 0:s.schema)!="object"?void 0:Si.call(this,r,s)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Ii.call(this,o),i===(0,Ye.normalizeId)(e)){let{schema:s}=o,{schemaId:u}=this.opts,p=s[u];return p&&(a=(0,Ye.resolveUrl)(this.opts.uriResolver,a,p)),new Cr({schema:s,schemaId:u,root:t,baseId:a})}return Si.call(this,r,o)}}Ue.resolveSchema=Qn;var ip=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Si(t,{baseId:e,schema:r,root:n}){var a;if(((a=t.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(let s of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,El.unescapeFragment)(s)];if(u===void 0)return;r=u;let p=typeof r=="object"&&r[this.opts.schemaId];!ip.has(s)&&p&&(e=(0,Ye.resolveUrl)(this.opts.uriResolver,e,p))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,El.schemaHasRulesButRef)(r,this.RULES)){let s=(0,Ye.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Qn.call(this,n,s)}let{schemaId:o}=this.opts;if(i=i||new Cr({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Rl=R((Jy,op)=>{op.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Cl=R((Yn,Tl)=>{f();(function(t,e){typeof Yn=="object"&&typeof Tl<"u"?e(Yn):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Yn,function(t){"use strict";function e(){for(var c=arguments.length,l=Array(c),d=0;d<c;d++)l[d]=arguments[d];if(l.length>1){l[0]=l[0].slice(0,-1);for(var y=l.length-1,g=1;g<y;++g)l[g]=l[g].slice(1,-1);return l[y]=l[y].slice(1),l.join("")}else return l[0]}function r(c){return"(?:"+c+")"}function n(c){return c===void 0?"undefined":c===null?"null":Object.prototype.toString.call(c).split(" ").pop().split("]").shift().toLowerCase()}function a(c){return c.toUpperCase()}function i(c){return c!=null?c instanceof Array?c:typeof c.length!="number"||c.split||c.setInterval||c.call?[c]:Array.prototype.slice.call(c):[]}function o(c,l){var d=c;if(l)for(var y in l)d[y]=l[y];return d}function s(c){var l="[A-Za-z]",d="[\\x0D]",y="[0-9]",g="[\\x22]",P=e(y,"[A-Fa-f]"),M="[\\x0A]",G="[\\x20]",X=r(r("%[EFef]"+P+"%"+P+P+"%"+P+P)+"|"+r("%[89A-Fa-f]"+P+"%"+P+P)+"|"+r("%"+P+P)),fe="[\\:\\/\\?\\#\\[\\]\\@]",K="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",se=e(fe,K),pe=c?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",oe=c?"[\\uE000-\\uF8FF]":"[]",Q=e(l,y,"[\\-\\.\\_\\~]",pe),le=r(l+e(l,y,"[\\+\\-\\.]")+"*"),ee=r(r(X+"|"+e(Q,K,"[\\:]"))+"*"),Ut=r(r("25[0-5]")+"|"+r("2[0-4]"+y)+"|"+r("1"+y+y)+"|"+r("[1-9]"+y)+"|"+y),Ae=r(r("25[0-5]")+"|"+r("2[0-4]"+y)+"|"+r("1"+y+y)+"|"+r("0?[1-9]"+y)+"|0?0?"+y),Me=r(Ae+"\\."+Ae+"\\."+Ae+"\\."+Ae),re=r(P+"{1,4}"),je=r(r(re+"\\:"+re)+"|"+Me),xe=r(r(re+"\\:")+"{6}"+je),ot=r("\\:\\:"+r(re+"\\:")+"{5}"+je),Bt=r(r(re)+"?\\:\\:"+r(re+"\\:")+"{4}"+je),yt=r(r(r(re+"\\:")+"{0,1}"+re)+"?\\:\\:"+r(re+"\\:")+"{3}"+je),Vr=r(r(r(re+"\\:")+"{0,2}"+re)+"?\\:\\:"+r(re+"\\:")+"{2}"+je),wn=r(r(r(re+"\\:")+"{0,3}"+re)+"?\\:\\:"+re+"\\:"+je),Sn=r(r(r(re+"\\:")+"{0,4}"+re)+"?\\:\\:"+je),dr=r(r(r(re+"\\:")+"{0,5}"+re)+"?\\:\\:"+re),fr=r(r(r(re+"\\:")+"{0,6}"+re)+"?\\:\\:"),vt=r([xe,ot,Bt,yt,Vr,wn,Sn,dr,fr].join("|")),pr=r(r(Q+"|"+X)+"+"),Sa=r(vt+"\\%25"+pr),Kt=r(vt+r("\\%25|\\%(?!"+P+"{2})")+pr),Cu=r("[vV]"+P+"+\\."+e(Q,K,"[\\:]")+"+"),ku=r("\\["+r(Kt+"|"+vt+"|"+Cu)+"\\]"),Ao=r(r(X+"|"+e(Q,K))+"*"),qr=r(ku+"|"+Me+"(?!"+Ao+")|"+Ao),Mr=r(y+"*"),jo=r(r(ee+"@")+"?"+qr+r("\\:"+Mr)+"?"),xr=r(X+"|"+e(Q,K,"[\\:\\@]")),Nu=r(xr+"*"),Vo=r(xr+"+"),Ou=r(r(X+"|"+e(Q,K,"[\\@]"))+"+"),_t=r(r("\\/"+Nu)+"*"),mr=r("\\/"+r(Vo+_t)+"?"),Ia=r(Ou+_t),In=r(Vo+_t),hr="(?!"+xr+")",rg=r(_t+"|"+mr+"|"+Ia+"|"+In+"|"+hr),gr=r(r(xr+"|"+e("[\\/\\?]",oe))+"*"),Fr=r(r(xr+"|[\\/\\?]")+"*"),qo=r(r("\\/\\/"+jo+_t)+"|"+mr+"|"+In+"|"+hr),Du=r(le+"\\:"+qo+r("\\?"+gr)+"?"+r("\\#"+Fr)+"?"),Au=r(r("\\/\\/"+jo+_t)+"|"+mr+"|"+Ia+"|"+hr),ju=r(Au+r("\\?"+gr)+"?"+r("\\#"+Fr)+"?"),ng=r(Du+"|"+ju),ag=r(le+"\\:"+qo+r("\\?"+gr)+"?"),ig="^("+le+")\\:"+r(r("\\/\\/("+r("("+ee+")@")+"?("+qr+")"+r("\\:("+Mr+")")+"?)")+"?("+_t+"|"+mr+"|"+In+"|"+hr+")")+r("\\?("+gr+")")+"?"+r("\\#("+Fr+")")+"?$",og="^(){0}"+r(r("\\/\\/("+r("("+ee+")@")+"?("+qr+")"+r("\\:("+Mr+")")+"?)")+"?("+_t+"|"+mr+"|"+Ia+"|"+hr+")")+r("\\?("+gr+")")+"?"+r("\\#("+Fr+")")+"?$",sg="^("+le+")\\:"+r(r("\\/\\/("+r("("+ee+")@")+"?("+qr+")"+r("\\:("+Mr+")")+"?)")+"?("+_t+"|"+mr+"|"+In+"|"+hr+")")+r("\\?("+gr+")")+"?$",lg="^"+r("\\#("+Fr+")")+"?$",cg="^"+r("("+ee+")@")+"?("+qr+")"+r("\\:("+Mr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",l,y,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Q,K),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Q,K),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Q,K),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Q,K),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Q,K,"[\\:\\@\\/\\?]",oe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Q,K,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Q,K),"g"),UNRESERVED:new RegExp(Q,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Q,se),"g"),PCT_ENCODED:new RegExp(X,"g"),IPV4ADDRESS:new RegExp("^("+Me+")$"),IPV6ADDRESS:new RegExp("^\\[?("+vt+")"+r(r("\\%25|\\%(?!"+P+"{2})")+"("+pr+")")+"?\\]?$")}}var u=s(!1),p=s(!0),m=function(){function c(l,d){var y=[],g=!0,P=!1,M=void 0;try{for(var G=l[Symbol.iterator](),X;!(g=(X=G.next()).done)&&(y.push(X.value),!(d&&y.length===d));g=!0);}catch(fe){P=!0,M=fe}finally{try{!g&&G.return&&G.return()}finally{if(P)throw M}}return y}return function(l,d){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return c(l,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(c){if(Array.isArray(c)){for(var l=0,d=Array(c.length);l<c.length;l++)d[l]=c[l];return d}else return Array.from(c)},$=2147483647,w=36,v=1,_=26,S=38,b=700,j=72,D=128,V="-",T=/^xn--/,Se=/[^\0-\x7E]/,qe=/[\x2E\u3002\uFF0E\uFF61]/g,mt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},zt=w-v,Ie=Math.floor,Lt=String.fromCharCode;function tt(c){throw new RangeError(mt[c])}function _n(c,l){for(var d=[],y=c.length;y--;)d[y]=l(c[y]);return d}function $n(c,l){var d=c.split("@"),y="";d.length>1&&(y=d[0]+"@",c=d[1]),c=c.replace(qe,".");var g=c.split("."),P=_n(g,l).join(".");return y+P}function vo(c){for(var l=[],d=0,y=c.length;d<y;){var g=c.charCodeAt(d++);if(g>=55296&&g<=56319&&d<y){var P=c.charCodeAt(d++);(P&64512)==56320?l.push(((g&1023)<<10)+(P&1023)+65536):(l.push(g),d--)}else l.push(g)}return l}var iu=function(l){return String.fromCodePoint.apply(String,h(l))},ou=function(l){return l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:w},_o=function(l,d){return l+22+75*(l<26)-((d!=0)<<5)},$o=function(l,d,y){var g=0;for(l=y?Ie(l/b):l>>1,l+=Ie(l/d);l>zt*_>>1;g+=w)l=Ie(l/zt);return Ie(g+(zt+1)*l/(l+S))},wo=function(l){var d=[],y=l.length,g=0,P=D,M=j,G=l.lastIndexOf(V);G<0&&(G=0);for(var X=0;X<G;++X)l.charCodeAt(X)>=128&&tt("not-basic"),d.push(l.charCodeAt(X));for(var fe=G>0?G+1:0;fe<y;){for(var K=g,se=1,pe=w;;pe+=w){fe>=y&&tt("invalid-input");var oe=ou(l.charCodeAt(fe++));(oe>=w||oe>Ie(($-g)/se))&&tt("overflow"),g+=oe*se;var Q=pe<=M?v:pe>=M+_?_:pe-M;if(oe<Q)break;var le=w-Q;se>Ie($/le)&&tt("overflow"),se*=le}var ee=d.length+1;M=$o(g-K,ee,K==0),Ie(g/ee)>$-P&&tt("overflow"),P+=Ie(g/ee),g%=ee,d.splice(g++,0,P)}return String.fromCodePoint.apply(String,d)},So=function(l){var d=[];l=vo(l);var y=l.length,g=D,P=0,M=j,G=!0,X=!1,fe=void 0;try{for(var K=l[Symbol.iterator](),se;!(G=(se=K.next()).done);G=!0){var pe=se.value;pe<128&&d.push(Lt(pe))}}catch(Kt){X=!0,fe=Kt}finally{try{!G&&K.return&&K.return()}finally{if(X)throw fe}}var oe=d.length,Q=oe;for(oe&&d.push(V);Q<y;){var le=$,ee=!0,Ut=!1,Ae=void 0;try{for(var Me=l[Symbol.iterator](),re;!(ee=(re=Me.next()).done);ee=!0){var je=re.value;je>=g&&je<le&&(le=je)}}catch(Kt){Ut=!0,Ae=Kt}finally{try{!ee&&Me.return&&Me.return()}finally{if(Ut)throw Ae}}var xe=Q+1;le-g>Ie(($-P)/xe)&&tt("overflow"),P+=(le-g)*xe,g=le;var ot=!0,Bt=!1,yt=void 0;try{for(var Vr=l[Symbol.iterator](),wn;!(ot=(wn=Vr.next()).done);ot=!0){var Sn=wn.value;if(Sn<g&&++P>$&&tt("overflow"),Sn==g){for(var dr=P,fr=w;;fr+=w){var vt=fr<=M?v:fr>=M+_?_:fr-M;if(dr<vt)break;var pr=dr-vt,Sa=w-vt;d.push(Lt(_o(vt+pr%Sa,0))),dr=Ie(pr/Sa)}d.push(Lt(_o(dr,0))),M=$o(P,xe,Q==oe),P=0,++Q}}}catch(Kt){Bt=!0,yt=Kt}finally{try{!ot&&Vr.return&&Vr.return()}finally{if(Bt)throw yt}}++P,++g}return d.join("")},su=function(l){return $n(l,function(d){return T.test(d)?wo(d.slice(4).toLowerCase()):d})},lu=function(l){return $n(l,function(d){return Se.test(d)?"xn--"+So(d):d})},sr={version:"2.1.0",ucs2:{decode:vo,encode:iu},decode:wo,encode:So,toASCII:lu,toUnicode:su},rt={};function nt(c){var l=c.charCodeAt(0),d=void 0;return l<16?d="%0"+l.toString(16).toUpperCase():l<128?d="%"+l.toString(16).toUpperCase():l<2048?d="%"+(l>>6|192).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase():d="%"+(l>>12|224).toString(16).toUpperCase()+"%"+(l>>6&63|128).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase(),d}function lr(c){for(var l="",d=0,y=c.length;d<y;){var g=parseInt(c.substr(d+1,2),16);if(g<128)l+=String.fromCharCode(g),d+=3;else if(g>=194&&g<224){if(y-d>=6){var P=parseInt(c.substr(d+4,2),16);l+=String.fromCharCode((g&31)<<6|P&63)}else l+=c.substr(d,6);d+=6}else if(g>=224){if(y-d>=9){var M=parseInt(c.substr(d+4,2),16),G=parseInt(c.substr(d+7,2),16);l+=String.fromCharCode((g&15)<<12|(M&63)<<6|G&63)}else l+=c.substr(d,9);d+=9}else l+=c.substr(d,3),d+=3}return l}function va(c,l){function d(y){var g=lr(y);return g.match(l.UNRESERVED)?g:y}return c.scheme&&(c.scheme=String(c.scheme).replace(l.PCT_ENCODED,d).toLowerCase().replace(l.NOT_SCHEME,"")),c.userinfo!==void 0&&(c.userinfo=String(c.userinfo).replace(l.PCT_ENCODED,d).replace(l.NOT_USERINFO,nt).replace(l.PCT_ENCODED,a)),c.host!==void 0&&(c.host=String(c.host).replace(l.PCT_ENCODED,d).toLowerCase().replace(l.NOT_HOST,nt).replace(l.PCT_ENCODED,a)),c.path!==void 0&&(c.path=String(c.path).replace(l.PCT_ENCODED,d).replace(c.scheme?l.NOT_PATH:l.NOT_PATH_NOSCHEME,nt).replace(l.PCT_ENCODED,a)),c.query!==void 0&&(c.query=String(c.query).replace(l.PCT_ENCODED,d).replace(l.NOT_QUERY,nt).replace(l.PCT_ENCODED,a)),c.fragment!==void 0&&(c.fragment=String(c.fragment).replace(l.PCT_ENCODED,d).replace(l.NOT_FRAGMENT,nt).replace(l.PCT_ENCODED,a)),c}function _a(c){return c.replace(/^0*(.*)/,"$1")||"0"}function $a(c,l){var d=c.match(l.IPV4ADDRESS)||[],y=m(d,2),g=y[1];return g?g.split(".").map(_a).join("."):c}function Io(c,l){var d=c.match(l.IPV6ADDRESS)||[],y=m(d,3),g=y[1],P=y[2];if(g){for(var M=g.toLowerCase().split("::").reverse(),G=m(M,2),X=G[0],fe=G[1],K=fe?fe.split(":").map(_a):[],se=X.split(":").map(_a),pe=l.IPV4ADDRESS.test(se[se.length-1]),oe=pe?7:8,Q=se.length-oe,le=Array(oe),ee=0;ee<oe;++ee)le[ee]=K[ee]||se[Q+ee]||"";pe&&(le[oe-1]=$a(le[oe-1],l));var Ut=le.reduce(function(xe,ot,Bt){if(!ot||ot==="0"){var yt=xe[xe.length-1];yt&&yt.index+yt.length===Bt?yt.length++:xe.push({index:Bt,length:1})}return xe},[]),Ae=Ut.sort(function(xe,ot){return ot.length-xe.length})[0],Me=void 0;if(Ae&&Ae.length>1){var re=le.slice(0,Ae.index),je=le.slice(Ae.index+Ae.length);Me=re.join(":")+"::"+je.join(":")}else Me=le.join(":");return P&&(Me+="%"+P),Me}else return c}var cu=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,uu="".match(/(){0}/)[1]===void 0;function ht(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={},y=l.iri!==!1?p:u;l.reference==="suffix"&&(c=(l.scheme?l.scheme+":":"")+"//"+c);var g=c.match(cu);if(g){uu?(d.scheme=g[1],d.userinfo=g[3],d.host=g[4],d.port=parseInt(g[5],10),d.path=g[6]||"",d.query=g[7],d.fragment=g[8],isNaN(d.port)&&(d.port=g[5])):(d.scheme=g[1]||void 0,d.userinfo=c.indexOf("@")!==-1?g[3]:void 0,d.host=c.indexOf("//")!==-1?g[4]:void 0,d.port=parseInt(g[5],10),d.path=g[6]||"",d.query=c.indexOf("?")!==-1?g[7]:void 0,d.fragment=c.indexOf("#")!==-1?g[8]:void 0,isNaN(d.port)&&(d.port=c.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?g[4]:void 0)),d.host&&(d.host=Io($a(d.host,y),y)),d.scheme===void 0&&d.userinfo===void 0&&d.host===void 0&&d.port===void 0&&!d.path&&d.query===void 0?d.reference="same-document":d.scheme===void 0?d.reference="relative":d.fragment===void 0?d.reference="absolute":d.reference="uri",l.reference&&l.reference!=="suffix"&&l.reference!==d.reference&&(d.error=d.error||"URI is not a "+l.reference+" reference.");var P=rt[(l.scheme||d.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!P||!P.unicodeSupport)){if(d.host&&(l.domainHost||P&&P.domainHost))try{d.host=sr.toASCII(d.host.replace(y.PCT_ENCODED,lr).toLowerCase())}catch(M){d.error=d.error||"Host's domain name can not be converted to ASCII via punycode: "+M}va(d,u)}else va(d,y);P&&P.parse&&P.parse(d,l)}else d.error=d.error||"URI can not be parsed.";return d}function du(c,l){var d=l.iri!==!1?p:u,y=[];return c.userinfo!==void 0&&(y.push(c.userinfo),y.push("@")),c.host!==void 0&&y.push(Io($a(String(c.host),d),d).replace(d.IPV6ADDRESS,function(g,P,M){return"["+P+(M?"%25"+M:"")+"]"})),typeof c.port=="number"&&(y.push(":"),y.push(c.port.toString(10))),y.length?y.join(""):void 0}var bo=/^\.\.?\//,Eo=/^\/\.(\/|$)/,Po=/^\/\.\.(\/|$)/,fu=/^\/?(?:.|\n)*?(?=\/|$)/;function cr(c){for(var l=[];c.length;)if(c.match(bo))c=c.replace(bo,"");else if(c.match(Eo))c=c.replace(Eo,"/");else if(c.match(Po))c=c.replace(Po,"/"),l.pop();else if(c==="."||c==="..")c="";else{var d=c.match(fu);if(d){var y=d[0];c=c.slice(y.length),l.push(y)}else throw new Error("Unexpected dot segment condition")}return l.join("")}function at(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=l.iri?p:u,y=[],g=rt[(l.scheme||c.scheme||"").toLowerCase()];if(g&&g.serialize&&g.serialize(c,l),c.host&&!d.IPV6ADDRESS.test(c.host)){if(l.domainHost||g&&g.domainHost)try{c.host=l.iri?sr.toUnicode(c.host):sr.toASCII(c.host.replace(d.PCT_ENCODED,lr).toLowerCase())}catch(G){c.error=c.error||"Host's domain name can not be converted to "+(l.iri?"Unicode":"ASCII")+" via punycode: "+G}}va(c,d),l.reference!=="suffix"&&c.scheme&&(y.push(c.scheme),y.push(":"));var P=du(c,l);if(P!==void 0&&(l.reference!=="suffix"&&y.push("//"),y.push(P),c.path&&c.path.charAt(0)!=="/"&&y.push("/")),c.path!==void 0){var M=c.path;!l.absolutePath&&(!g||!g.absolutePath)&&(M=cr(M)),P===void 0&&(M=M.replace(/^\/\//,"/%2F")),y.push(M)}return c.query!==void 0&&(y.push("?"),y.push(c.query)),c.fragment!==void 0&&(y.push("#"),y.push(c.fragment)),y.join("")}function Ro(c,l){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=arguments[3],g={};return y||(c=ht(at(c,d),d),l=ht(at(l,d),d)),d=d||{},!d.tolerant&&l.scheme?(g.scheme=l.scheme,g.userinfo=l.userinfo,g.host=l.host,g.port=l.port,g.path=cr(l.path||""),g.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(g.userinfo=l.userinfo,g.host=l.host,g.port=l.port,g.path=cr(l.path||""),g.query=l.query):(l.path?(l.path.charAt(0)==="/"?g.path=cr(l.path):((c.userinfo!==void 0||c.host!==void 0||c.port!==void 0)&&!c.path?g.path="/"+l.path:c.path?g.path=c.path.slice(0,c.path.lastIndexOf("/")+1)+l.path:g.path=l.path,g.path=cr(g.path)),g.query=l.query):(g.path=c.path,l.query!==void 0?g.query=l.query:g.query=c.query),g.userinfo=c.userinfo,g.host=c.host,g.port=c.port),g.scheme=c.scheme),g.fragment=l.fragment,g}function pu(c,l,d){var y=o({scheme:"null"},d);return at(Ro(ht(c,y),ht(l,y),y,!0),y)}function mu(c,l){return typeof c=="string"?c=at(ht(c,l),l):n(c)==="object"&&(c=ht(at(c,l),l)),c}function hu(c,l,d){return typeof c=="string"?c=at(ht(c,d),d):n(c)==="object"&&(c=at(c,d)),typeof l=="string"?l=at(ht(l,d),d):n(l)==="object"&&(l=at(l,d)),c===l}function gu(c,l){return c&&c.toString().replace(!l||!l.iri?u.ESCAPE:p.ESCAPE,nt)}function gt(c,l){return c&&c.toString().replace(!l||!l.iri?u.PCT_ENCODED:p.PCT_ENCODED,lr)}var jr={scheme:"http",domainHost:!0,parse:function(l,d){return l.host||(l.error=l.error||"HTTP URIs must have a host."),l},serialize:function(l,d){return(l.port===(String(l.scheme).toLowerCase()!=="https"?80:443)||l.port==="")&&(l.port=void 0),l.path||(l.path="/"),l}},To={scheme:"https",domainHost:jr.domainHost,parse:jr.parse,serialize:jr.serialize},yu={},vu=!0,Co="[A-Za-z0-9\\-\\.\\_\\~"+(vu?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",it="[0-9A-Fa-f]",_u=r(r("%[EFef]"+it+"%"+it+it+"%"+it+it)+"|"+r("%[89A-Fa-f]"+it+"%"+it+it)+"|"+r("%"+it+it)),$u="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",wu="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Su=e(wu,'[\\"\\\\]'),Iu="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",bu=new RegExp(Co,"g"),ur=new RegExp(_u,"g"),Eu=new RegExp(e("[^]",$u,"[\\.]",'[\\"]',Su),"g"),ko=new RegExp(e("[^]",Co,Iu),"g"),Pu=ko;function wa(c){var l=lr(c);return l.match(bu)?l:c}var No={scheme:"mailto",parse:function(l,d){var y=l,g=y.to=y.path?y.path.split(","):[];if(y.path=void 0,y.query){for(var P=!1,M={},G=y.query.split("&"),X=0,fe=G.length;X<fe;++X){var K=G[X].split("=");switch(K[0]){case"to":for(var se=K[1].split(","),pe=0,oe=se.length;pe<oe;++pe)g.push(se[pe]);break;case"subject":y.subject=gt(K[1],d);break;case"body":y.body=gt(K[1],d);break;default:P=!0,M[gt(K[0],d)]=gt(K[1],d);break}}P&&(y.headers=M)}y.query=void 0;for(var Q=0,le=g.length;Q<le;++Q){var ee=g[Q].split("@");if(ee[0]=gt(ee[0]),d.unicodeSupport)ee[1]=gt(ee[1],d).toLowerCase();else try{ee[1]=sr.toASCII(gt(ee[1],d).toLowerCase())}catch(Ut){y.error=y.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ut}g[Q]=ee.join("@")}return y},serialize:function(l,d){var y=l,g=i(l.to);if(g){for(var P=0,M=g.length;P<M;++P){var G=String(g[P]),X=G.lastIndexOf("@"),fe=G.slice(0,X).replace(ur,wa).replace(ur,a).replace(Eu,nt),K=G.slice(X+1);try{K=d.iri?sr.toUnicode(K):sr.toASCII(gt(K,d).toLowerCase())}catch(Q){y.error=y.error||"Email address's domain name can not be converted to "+(d.iri?"Unicode":"ASCII")+" via punycode: "+Q}g[P]=fe+"@"+K}y.path=g.join(",")}var se=l.headers=l.headers||{};l.subject&&(se.subject=l.subject),l.body&&(se.body=l.body);var pe=[];for(var oe in se)se[oe]!==yu[oe]&&pe.push(oe.replace(ur,wa).replace(ur,a).replace(ko,nt)+"="+se[oe].replace(ur,wa).replace(ur,a).replace(Pu,nt));return pe.length&&(y.query=pe.join("&")),y}},Ru=/^([^\:]+)\:(.*)/,Oo={scheme:"urn",parse:function(l,d){var y=l.path&&l.path.match(Ru),g=l;if(y){var P=d.scheme||g.scheme||"urn",M=y[1].toLowerCase(),G=y[2],X=P+":"+(d.nid||M),fe=rt[X];g.nid=M,g.nss=G,g.path=void 0,fe&&(g=fe.parse(g,d))}else g.error=g.error||"URN can not be parsed.";return g},serialize:function(l,d){var y=d.scheme||l.scheme||"urn",g=l.nid,P=y+":"+(d.nid||g),M=rt[P];M&&(l=M.serialize(l,d));var G=l,X=l.nss;return G.path=(g||d.nid)+":"+X,G}},Tu=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Do={scheme:"urn:uuid",parse:function(l,d){var y=l;return y.uuid=y.nss,y.nss=void 0,!d.tolerant&&(!y.uuid||!y.uuid.match(Tu))&&(y.error=y.error||"UUID is not valid."),y},serialize:function(l,d){var y=l;return y.nss=(l.uuid||"").toLowerCase(),y}};rt[jr.scheme]=jr,rt[To.scheme]=To,rt[No.scheme]=No,rt[Oo.scheme]=Oo,rt[Do.scheme]=Do,t.SCHEMES=rt,t.pctEncChar=nt,t.pctDecChars=lr,t.parse=ht,t.removeDotSegments=cr,t.serialize=at,t.resolveComponents=Ro,t.resolve=pu,t.normalize=mu,t.equal=hu,t.escapeComponent=gu,t.unescapeComponent=gt,Object.defineProperty(t,"__esModule",{value:!0})})});var Nl=R(bi=>{"use strict";f();Object.defineProperty(bi,"__esModule",{value:!0});var kl=Cl();kl.code='require("ajv/dist/runtime/uri").default';bi.default=kl});var xl=R($e=>{"use strict";f();Object.defineProperty($e,"__esModule",{value:!0});$e.CodeGen=$e.Name=$e.nil=$e.stringify=$e.str=$e._=$e.KeywordCxt=void 0;var sp=an();Object.defineProperty($e,"KeywordCxt",{enumerable:!0,get:function(){return sp.KeywordCxt}});var kr=U();Object.defineProperty($e,"_",{enumerable:!0,get:function(){return kr._}});Object.defineProperty($e,"str",{enumerable:!0,get:function(){return kr.str}});Object.defineProperty($e,"stringify",{enumerable:!0,get:function(){return kr.stringify}});Object.defineProperty($e,"nil",{enumerable:!0,get:function(){return kr.nil}});Object.defineProperty($e,"Name",{enumerable:!0,get:function(){return kr.Name}});Object.defineProperty($e,"CodeGen",{enumerable:!0,get:function(){return kr.CodeGen}});var lp=yi(),Vl=wi(),cp=ni(),on=Xn(),up=U(),sn=tn(),Zn=en(),Pi=J(),Ol=Rl(),dp=Nl(),ql=(t,e)=>new RegExp(t,e);ql.code="new RegExp";var fp=["removeAdditional","useDefaults","coerceTypes"],pp=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),mp={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hp={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Dl=200;function gp(t){var e,r,n,a,i,o,s,u,p,m,h,$,w,v,_,S,b,j,D,V,T,Se,qe,mt,zt;let Ie=t.strict,Lt=(e=t.code)===null||e===void 0?void 0:e.optimize,tt=Lt===!0||Lt===void 0?1:Lt||0,_n=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:ql,$n=(a=t.uriResolver)!==null&&a!==void 0?a:dp.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:Ie)!==null&&o!==void 0?o:!0,strictNumbers:(u=(s=t.strictNumbers)!==null&&s!==void 0?s:Ie)!==null&&u!==void 0?u:!0,strictTypes:(m=(p=t.strictTypes)!==null&&p!==void 0?p:Ie)!==null&&m!==void 0?m:"log",strictTuples:($=(h=t.strictTuples)!==null&&h!==void 0?h:Ie)!==null&&$!==void 0?$:"log",strictRequired:(v=(w=t.strictRequired)!==null&&w!==void 0?w:Ie)!==null&&v!==void 0?v:!1,code:t.code?ue(k({},t.code),{optimize:tt,regExp:_n}):{optimize:tt,regExp:_n},loopRequired:(_=t.loopRequired)!==null&&_!==void 0?_:Dl,loopEnum:(S=t.loopEnum)!==null&&S!==void 0?S:Dl,meta:(b=t.meta)!==null&&b!==void 0?b:!0,messages:(j=t.messages)!==null&&j!==void 0?j:!0,inlineRefs:(D=t.inlineRefs)!==null&&D!==void 0?D:!0,schemaId:(V=t.schemaId)!==null&&V!==void 0?V:"$id",addUsedSchema:(T=t.addUsedSchema)!==null&&T!==void 0?T:!0,validateSchema:(Se=t.validateSchema)!==null&&Se!==void 0?Se:!0,validateFormats:(qe=t.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(mt=t.unicodeRegExp)!==null&&mt!==void 0?mt:!0,int32range:(zt=t.int32range)!==null&&zt!==void 0?zt:!0,uriResolver:$n}}var ln=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=k(k({},e),gp(e));let{es5:r,lines:n}=this.opts.code;this.scope=new up.ValueScope({scope:{},prefixes:pp,es5:r,lines:n}),this.logger=Sp(e.logger);let a=e.validateFormats;e.validateFormats=!1,this.RULES=(0,cp.getRules)(),Al.call(this,mp,e,"NOT SUPPORTED"),Al.call(this,hp,e,"DEPRECATED","warn"),this._metaOpts=$p.call(this),e.formats&&vp.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&_p.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),yp.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,a=Ol;n==="id"&&(a=k({},Ol),a.id=a.$id,delete a.$id),r&&e&&this.addMetaSchema(a,a[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let a=n(r);return"$async"in n||(this.errors=n.errors),a}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return a.call(this,e,r);async function a(m,h){await i.call(this,m.$schema);let $=this._addSchema(m,h);return $.validate||o.call(this,$)}async function i(m){m&&!this.getSchema(m)&&await a.call(this,{$ref:m},!0)}async function o(m){try{return this._compileSchemaEnv(m)}catch(h){if(!(h instanceof Vl.default))throw h;return s.call(this,h),await u.call(this,h.missingSchema),o.call(this,m)}}function s({missingSchema:m,missingRef:h}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${h} cannot be resolved`)}async function u(m){let h=await p.call(this,m);this.refs[m]||await i.call(this,h.$schema),this.refs[m]||this.addSchema(h,m,r)}async function p(m){let h=this._loading[m];if(h)return h;try{return await(this._loading[m]=n(m))}finally{delete this._loading[m]}}}addSchema(e,r,n,a=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,a);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,sn.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,a,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let a=this.validate(n,e);if(!a&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return a}getSchema(e){let r;for(;typeof(r=jl.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,a=new on.SchemaEnv({schema:{},schemaId:n});if(r=on.resolveSchema.call(this,a,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=jl.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,sn.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(bp.call(this,n,r),!r)return(0,Pi.eachItem)(n,i=>Ei.call(this,i)),this;Pp.call(this,r);let a=ue(k({},r),{type:(0,Zn.getJSONTypes)(r.type),schemaType:(0,Zn.getJSONTypes)(r.schemaType)});return(0,Pi.eachItem)(n,a.type.length===0?i=>Ei.call(this,i,a):i=>a.type.forEach(o=>Ei.call(this,i,a,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let a=n.rules.findIndex(i=>i.keyword===e);a>=0&&n.rules.splice(a,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(a=>`${n}${a.instancePath} ${a.message}`).reduce((a,i)=>a+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let a of r){let i=a.split("/").slice(1),o=e;for(let s of i)o=o[s];for(let s in n){let u=n[s];if(typeof u!="object")continue;let{$data:p}=u.definition,m=o[s];p&&m&&(o[s]=Ml(m))}}return e}_removeAllSchemas(e,r){for(let n in e){let a=e[n];(!r||r.test(n))&&(typeof a=="string"?delete e[n]:a&&!a.meta&&(this._cache.delete(a.schema),delete e[n]))}}_addSchema(e,r,n,a=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:s}=this.opts;if(typeof e=="object")o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,sn.normalizeId)(o||n);let p=sn.getSchemaRefs.call(this,e,n);return u=new on.SchemaEnv({schema:e,schemaId:s,meta:r,baseId:n,localRefs:p}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),a&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):on.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{on.compileSchema.call(this,e)}finally{this.opts=r}}};$e.default=ln;ln.ValidationError=lp.default;ln.MissingRefError=Vl.default;function Al(t,e,r,n="error"){for(let a in t){let i=a;i in e&&this.logger[n](`${r}: option ${a}. ${t[i]}`)}}function jl(t){return t=(0,sn.normalizeId)(t),this.schemas[t]||this.refs[t]}function yp(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function vp(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function _p(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function $p(){let t=k({},this.opts);for(let e of fp)delete t[e];return t}var wp={log(){},warn(){},error(){}};function Sp(t){if(t===!1)return wp;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Ip=/^[a-z_$][a-z0-9_$:-]*$/i;function bp(t,e){let{RULES:r}=this;if((0,Pi.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Ip.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Ei(t,e,r){var n;let a=e==null?void 0:e.post;if(r&&a)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=a?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let s={keyword:t,definition:ue(k({},e),{type:(0,Zn.getJSONTypes)(e.type),schemaType:(0,Zn.getJSONTypes)(e.schemaType)})};e.before?Ep.call(this,o,s,e.before):o.rules.push(s),i.all[t]=s,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function Ep(t,e,r){let n=t.rules.findIndex(a=>a.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Pp(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Ml(e)),t.validateSchema=this.compile(e,!0))}var Rp={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ml(t){return{anyOf:[t,Rp]}}});var Fl=R(Ri=>{"use strict";f();Object.defineProperty(Ri,"__esModule",{value:!0});var Tp={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ri.default=Tp});var Bl=R(nr=>{"use strict";f();Object.defineProperty(nr,"__esModule",{value:!0});nr.callRef=nr.getValidate=void 0;var Cp=wi(),zl=Le(),De=U(),Nr=Et(),Ll=Xn(),ea=J(),kp={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:a,schemaEnv:i,validateName:o,opts:s,self:u}=n,{root:p}=i;if((r==="#"||r==="#/")&&a===p.baseId)return h();let m=Ll.resolveRef.call(u,p,a,r);if(m===void 0)throw new Cp.default(n.opts.uriResolver,a,r);if(m instanceof Ll.SchemaEnv)return $(m);return w(m);function h(){if(i===p)return ta(t,o,i,i.$async);let v=e.scopeValue("root",{ref:p});return ta(t,(0,De._)`${v}.validate`,p,p.$async)}function $(v){let _=Ul(t,v);ta(t,_,v,v.$async)}function w(v){let _=e.scopeValue("schema",s.code.source===!0?{ref:v,code:(0,De.stringify)(v)}:{ref:v}),S=e.name("valid"),b=t.subschema({schema:v,dataTypes:[],schemaPath:De.nil,topSchemaRef:_,errSchemaPath:r},S);t.mergeEvaluated(b),t.ok(S)}}};function Ul(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,De._)`${r.scopeValue("wrapper",{ref:e})}.validate`}nr.getValidate=Ul;function ta(t,e,r,n){let{gen:a,it:i}=t,{allErrors:o,schemaEnv:s,opts:u}=i,p=u.passContext?Nr.default.this:De.nil;n?m():h();function m(){if(!s.$async)throw new Error("async schema referenced by sync schema");let v=a.let("valid");a.try(()=>{a.code((0,De._)`await ${(0,zl.callValidateCode)(t,e,p)}`),w(e),o||a.assign(v,!0)},_=>{a.if((0,De._)`!(${_} instanceof ${i.ValidationError})`,()=>a.throw(_)),$(_),o||a.assign(v,!1)}),t.ok(v)}function h(){t.result((0,zl.callValidateCode)(t,e,p),()=>w(e),()=>$(e))}function $(v){let _=(0,De._)`${v}.errors`;a.assign(Nr.default.vErrors,(0,De._)`${Nr.default.vErrors} === null ? ${_} : ${Nr.default.vErrors}.concat(${_})`),a.assign(Nr.default.errors,(0,De._)`${Nr.default.vErrors}.length`)}function w(v){var _;if(!i.opts.unevaluated)return;let S=(_=r==null?void 0:r.validate)===null||_===void 0?void 0:_.evaluated;if(i.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(i.props=ea.mergeEvaluated.props(a,S.props,i.props));else{let b=a.var("props",(0,De._)`${v}.evaluated.props`);i.props=ea.mergeEvaluated.props(a,b,i.props,De.Name)}if(i.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(i.items=ea.mergeEvaluated.items(a,S.items,i.items));else{let b=a.var("items",(0,De._)`${v}.evaluated.items`);i.items=ea.mergeEvaluated.items(a,b,i.items,De.Name)}}}nr.callRef=ta;nr.default=kp});var Kl=R(Ti=>{"use strict";f();Object.defineProperty(Ti,"__esModule",{value:!0});var Np=Fl(),Op=Bl(),Dp=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Np.default,Op.default];Ti.default=Dp});var Hl=R(Ci=>{"use strict";f();Object.defineProperty(Ci,"__esModule",{value:!0});var ra=U(),xt=ra.operators,na={maximum:{okStr:"<=",ok:xt.LTE,fail:xt.GT},minimum:{okStr:">=",ok:xt.GTE,fail:xt.LT},exclusiveMaximum:{okStr:"<",ok:xt.LT,fail:xt.GTE},exclusiveMinimum:{okStr:">",ok:xt.GT,fail:xt.LTE}},Ap={message:({keyword:t,schemaCode:e})=>(0,ra.str)`must be ${na[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ra._)`{comparison: ${na[t].okStr}, limit: ${e}}`},jp={keyword:Object.keys(na),type:"number",schemaType:"number",$data:!0,error:Ap,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,ra._)`${r} ${na[e].fail} ${n} || isNaN(${r})`)}};Ci.default=jp});var Gl=R(ki=>{"use strict";f();Object.defineProperty(ki,"__esModule",{value:!0});var cn=U(),Vp={message:({schemaCode:t})=>(0,cn.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,cn._)`{multipleOf: ${t}}`},qp={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Vp,code(t){let{gen:e,data:r,schemaCode:n,it:a}=t,i=a.opts.multipleOfPrecision,o=e.let("res"),s=i?(0,cn._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,cn._)`${o} !== parseInt(${o})`;t.fail$data((0,cn._)`(${n} === 0 || (${o} = ${r}/${n}, ${s}))`)}};ki.default=qp});var Jl=R(Ni=>{"use strict";f();Object.defineProperty(Ni,"__esModule",{value:!0});function Wl(t){let e=t.length,r=0,n=0,a;for(;n<e;)r++,a=t.charCodeAt(n++),a>=55296&&a<=56319&&n<e&&(a=t.charCodeAt(n),(a&64512)===56320&&n++);return r}Ni.default=Wl;Wl.code='require("ajv/dist/runtime/ucs2length").default'});var Ql=R(Oi=>{"use strict";f();Object.defineProperty(Oi,"__esModule",{value:!0});var ar=U(),Mp=J(),xp=Jl(),Fp={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ar.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ar._)`{limit: ${t}}`},zp={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Fp,code(t){let{keyword:e,data:r,schemaCode:n,it:a}=t,i=e==="maxLength"?ar.operators.GT:ar.operators.LT,o=a.opts.unicode===!1?(0,ar._)`${r}.length`:(0,ar._)`${(0,Mp.useFunc)(t.gen,xp.default)}(${r})`;t.fail$data((0,ar._)`${o} ${i} ${n}`)}};Oi.default=zp});var Xl=R(Di=>{"use strict";f();Object.defineProperty(Di,"__esModule",{value:!0});var Lp=Le(),aa=U(),Up={message:({schemaCode:t})=>(0,aa.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,aa._)`{pattern: ${t}}`},Bp={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Up,code(t){let{data:e,$data:r,schema:n,schemaCode:a,it:i}=t,o=i.opts.unicodeRegExp?"u":"",s=r?(0,aa._)`(new RegExp(${a}, ${o}))`:(0,Lp.usePattern)(t,n);t.fail$data((0,aa._)`!${s}.test(${e})`)}};Di.default=Bp});var Yl=R(Ai=>{"use strict";f();Object.defineProperty(Ai,"__esModule",{value:!0});var un=U(),Kp={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,un.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,un._)`{limit: ${t}}`},Hp={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kp,code(t){let{keyword:e,data:r,schemaCode:n}=t,a=e==="maxProperties"?un.operators.GT:un.operators.LT;t.fail$data((0,un._)`Object.keys(${r}).length ${a} ${n}`)}};Ai.default=Hp});var Zl=R(ji=>{"use strict";f();Object.defineProperty(ji,"__esModule",{value:!0});var dn=Le(),fn=U(),Gp=J(),Wp={message:({params:{missingProperty:t}})=>(0,fn.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,fn._)`{missingProperty: ${t}}`},Jp={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Wp,code(t){let{gen:e,schema:r,schemaCode:n,data:a,$data:i,it:o}=t,{opts:s}=o;if(!i&&r.length===0)return;let u=r.length>=s.loopRequired;if(o.allErrors?p():m(),s.strictRequired){let w=t.parentSchema.properties,{definedProperties:v}=t.it;for(let _ of r)if((w==null?void 0:w[_])===void 0&&!v.has(_)){let S=o.schemaEnv.baseId+o.errSchemaPath,b=`required property "${_}" is not defined at "${S}" (strictRequired)`;(0,Gp.checkStrictMode)(o,b,o.opts.strictRequired)}}function p(){if(u||i)t.block$data(fn.nil,h);else for(let w of r)(0,dn.checkReportMissingProp)(t,w)}function m(){let w=e.let("missing");if(u||i){let v=e.let("valid",!0);t.block$data(v,()=>$(w,v)),t.ok(v)}else e.if((0,dn.checkMissingProp)(t,r,w)),(0,dn.reportMissingProp)(t,w),e.else()}function h(){e.forOf("prop",n,w=>{t.setParams({missingProperty:w}),e.if((0,dn.noPropertyInData)(e,a,w,s.ownProperties),()=>t.error())})}function $(w,v){t.setParams({missingProperty:w}),e.forOf(w,n,()=>{e.assign(v,(0,dn.propertyInData)(e,a,w,s.ownProperties)),e.if((0,fn.not)(v),()=>{t.error(),e.break()})},fn.nil)}}};ji.default=Jp});var ec=R(Vi=>{"use strict";f();Object.defineProperty(Vi,"__esModule",{value:!0});var pn=U(),Qp={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,pn.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,pn._)`{limit: ${t}}`},Xp={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Qp,code(t){let{keyword:e,data:r,schemaCode:n}=t,a=e==="maxItems"?pn.operators.GT:pn.operators.LT;t.fail$data((0,pn._)`${r}.length ${a} ${n}`)}};Vi.default=Xp});var ia=R(qi=>{"use strict";f();Object.defineProperty(qi,"__esModule",{value:!0});var tc=Bo();tc.code='require("ajv/dist/runtime/equal").default';qi.default=tc});var rc=R(xi=>{"use strict";f();Object.defineProperty(xi,"__esModule",{value:!0});var Mi=en(),we=U(),Yp=J(),Zp=ia(),em={message:({params:{i:t,j:e}})=>(0,we.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,we._)`{i: ${t}, j: ${e}}`},tm={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:em,code(t){let{gen:e,data:r,$data:n,schema:a,parentSchema:i,schemaCode:o,it:s}=t;if(!n&&!a)return;let u=e.let("valid"),p=i.items?(0,Mi.getSchemaTypes)(i.items):[];t.block$data(u,m,(0,we._)`${o} === false`),t.ok(u);function m(){let v=e.let("i",(0,we._)`${r}.length`),_=e.let("j");t.setParams({i:v,j:_}),e.assign(u,!0),e.if((0,we._)`${v} > 1`,()=>(h()?$:w)(v,_))}function h(){return p.length>0&&!p.some(v=>v==="object"||v==="array")}function $(v,_){let S=e.name("item"),b=(0,Mi.checkDataTypes)(p,S,s.opts.strictNumbers,Mi.DataType.Wrong),j=e.const("indices",(0,we._)`{}`);e.for((0,we._)`;${v}--;`,()=>{e.let(S,(0,we._)`${r}[${v}]`),e.if(b,(0,we._)`continue`),p.length>1&&e.if((0,we._)`typeof ${S} == "string"`,(0,we._)`${S} += "_"`),e.if((0,we._)`typeof ${j}[${S}] == "number"`,()=>{e.assign(_,(0,we._)`${j}[${S}]`),t.error(),e.assign(u,!1).break()}).code((0,we._)`${j}[${S}] = ${v}`)})}function w(v,_){let S=(0,Yp.useFunc)(e,Zp.default),b=e.name("outer");e.label(b).for((0,we._)`;${v}--;`,()=>e.for((0,we._)`${_} = ${v}; ${_}--;`,()=>e.if((0,we._)`${S}(${r}[${v}], ${r}[${_}])`,()=>{t.error(),e.assign(u,!1).break(b)})))}}};xi.default=tm});var nc=R(zi=>{"use strict";f();Object.defineProperty(zi,"__esModule",{value:!0});var Fi=U(),rm=J(),nm=ia(),am={message:"must be equal to constant",params:({schemaCode:t})=>(0,Fi._)`{allowedValue: ${t}}`},im={keyword:"const",$data:!0,error:am,code(t){let{gen:e,data:r,$data:n,schemaCode:a,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Fi._)`!${(0,rm.useFunc)(e,nm.default)}(${r}, ${a})`):t.fail((0,Fi._)`${i} !== ${r}`)}};zi.default=im});var ac=R(Li=>{"use strict";f();Object.defineProperty(Li,"__esModule",{value:!0});var mn=U(),om=J(),sm=ia(),lm={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,mn._)`{allowedValues: ${t}}`},cm={keyword:"enum",schemaType:"array",$data:!0,error:lm,code(t){let{gen:e,data:r,$data:n,schema:a,schemaCode:i,it:o}=t;if(!n&&a.length===0)throw new Error("enum must have non-empty array");let s=a.length>=o.opts.loopEnum,u,p=()=>u!=null?u:u=(0,om.useFunc)(e,sm.default),m;if(s||n)m=e.let("valid"),t.block$data(m,h);else{if(!Array.isArray(a))throw new Error("ajv implementation error");let w=e.const("vSchema",i);m=(0,mn.or)(...a.map((v,_)=>$(w,_)))}t.pass(m);function h(){e.assign(m,!1),e.forOf("v",i,w=>e.if((0,mn._)`${p()}(${r}, ${w})`,()=>e.assign(m,!0).break()))}function $(w,v){let _=a[v];return typeof _=="object"&&_!==null?(0,mn._)`${p()}(${r}, ${w}[${v}])`:(0,mn._)`${r} === ${_}`}}};Li.default=cm});var ic=R(Ui=>{"use strict";f();Object.defineProperty(Ui,"__esModule",{value:!0});var um=Hl(),dm=Gl(),fm=Ql(),pm=Xl(),mm=Yl(),hm=Zl(),gm=ec(),ym=rc(),vm=nc(),_m=ac(),$m=[um.default,dm.default,fm.default,pm.default,mm.default,hm.default,gm.default,ym.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},vm.default,_m.default];Ui.default=$m});var Ki=R(hn=>{"use strict";f();Object.defineProperty(hn,"__esModule",{value:!0});hn.validateAdditionalItems=void 0;var ir=U(),Bi=J(),wm={message:({params:{len:t}})=>(0,ir.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ir._)`{limit: ${t}}`},Sm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:wm,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Bi.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}oc(t,n)}};function oc(t,e){let{gen:r,schema:n,data:a,keyword:i,it:o}=t;o.items=!0;let s=r.const("len",(0,ir._)`${a}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ir._)`${s} <= ${e.length}`);else if(typeof n=="object"&&!(0,Bi.alwaysValidSchema)(o,n)){let p=r.var("valid",(0,ir._)`${s} <= ${e.length}`);r.if((0,ir.not)(p),()=>u(p)),t.ok(p)}function u(p){r.forRange("i",e.length,s,m=>{t.subschema({keyword:i,dataProp:m,dataPropType:Bi.Type.Num},p),o.allErrors||r.if((0,ir.not)(p),()=>r.break())})}}hn.validateAdditionalItems=oc;hn.default=Sm});var Hi=R(gn=>{"use strict";f();Object.defineProperty(gn,"__esModule",{value:!0});gn.validateTuple=void 0;var sc=U(),oa=J(),Im=Le(),bm={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return lc(t,"additionalItems",e);r.items=!0,!(0,oa.alwaysValidSchema)(r,e)&&t.ok((0,Im.validateArray)(t))}};function lc(t,e,r=t.schema){let{gen:n,parentSchema:a,data:i,keyword:o,it:s}=t;m(a),s.opts.unevaluated&&r.length&&s.items!==!0&&(s.items=oa.mergeEvaluated.items(n,r.length,s.items));let u=n.name("valid"),p=n.const("len",(0,sc._)`${i}.length`);r.forEach((h,$)=>{(0,oa.alwaysValidSchema)(s,h)||(n.if((0,sc._)`${p} > ${$}`,()=>t.subschema({keyword:o,schemaProp:$,dataProp:$},u)),t.ok(u))});function m(h){let{opts:$,errSchemaPath:w}=s,v=r.length,_=v===h.minItems&&(v===h.maxItems||h[e]===!1);if($.strictTuples&&!_){let S=`"${o}" is ${v}-tuple, but minItems or maxItems/${e} are not specified or different at path "${w}"`;(0,oa.checkStrictMode)(s,S,$.strictTuples)}}}gn.validateTuple=lc;gn.default=bm});var cc=R(Gi=>{"use strict";f();Object.defineProperty(Gi,"__esModule",{value:!0});var Em=Hi(),Pm={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Em.validateTuple)(t,"items")};Gi.default=Pm});var dc=R(Wi=>{"use strict";f();Object.defineProperty(Wi,"__esModule",{value:!0});var uc=U(),Rm=J(),Tm=Le(),Cm=Ki(),km={message:({params:{len:t}})=>(0,uc.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,uc._)`{limit: ${t}}`},Nm={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:km,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:a}=r;n.items=!0,!(0,Rm.alwaysValidSchema)(n,e)&&(a?(0,Cm.validateAdditionalItems)(t,a):t.ok((0,Tm.validateArray)(t)))}};Wi.default=Nm});var fc=R(Ji=>{"use strict";f();Object.defineProperty(Ji,"__esModule",{value:!0});var Be=U(),sa=J(),Om={message:({params:{min:t,max:e}})=>e===void 0?(0,Be.str)`must contain at least ${t} valid item(s)`:(0,Be.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Be._)`{minContains: ${t}}`:(0,Be._)`{minContains: ${t}, maxContains: ${e}}`},Dm={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Om,code(t){let{gen:e,schema:r,parentSchema:n,data:a,it:i}=t,o,s,{minContains:u,maxContains:p}=n;i.opts.next?(o=u===void 0?1:u,s=p):o=1;let m=e.const("len",(0,Be._)`${a}.length`);if(t.setParams({min:o,max:s}),s===void 0&&o===0){(0,sa.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&o>s){(0,sa.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,sa.alwaysValidSchema)(i,r)){let _=(0,Be._)`${m} >= ${o}`;s!==void 0&&(_=(0,Be._)`${_} && ${m} <= ${s}`),t.pass(_);return}i.items=!0;let h=e.name("valid");s===void 0&&o===1?w(h,()=>e.if(h,()=>e.break())):o===0?(e.let(h,!0),s!==void 0&&e.if((0,Be._)`${a}.length > 0`,$)):(e.let(h,!1),$()),t.result(h,()=>t.reset());function $(){let _=e.name("_valid"),S=e.let("count",0);w(_,()=>e.if(_,()=>v(S)))}function w(_,S){e.forRange("i",0,m,b=>{t.subschema({keyword:"contains",dataProp:b,dataPropType:sa.Type.Num,compositeRule:!0},_),S()})}function v(_){e.code((0,Be._)`${_}++`),s===void 0?e.if((0,Be._)`${_} >= ${o}`,()=>e.assign(h,!0).break()):(e.if((0,Be._)`${_} > ${s}`,()=>e.assign(h,!1).break()),o===1?e.assign(h,!0):e.if((0,Be._)`${_} >= ${o}`,()=>e.assign(h,!0)))}}};Ji.default=Dm});var hc=R(pt=>{"use strict";f();Object.defineProperty(pt,"__esModule",{value:!0});pt.validateSchemaDeps=pt.validatePropertyDeps=pt.error=void 0;var Qi=U(),Am=J(),yn=Le();pt.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,Qi.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,Qi._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var jm={keyword:"dependencies",type:"object",schemaType:"object",error:pt.error,code(t){let[e,r]=Vm(t);pc(t,e),mc(t,r)}};function Vm({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let a=Array.isArray(t[n])?e:r;a[n]=t[n]}return[e,r]}function pc(t,e=t.schema){let{gen:r,data:n,it:a}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let s=e[o];if(s.length===0)continue;let u=(0,yn.propertyInData)(r,n,o,a.opts.ownProperties);t.setParams({property:o,depsCount:s.length,deps:s.join(", ")}),a.allErrors?r.if(u,()=>{for(let p of s)(0,yn.checkReportMissingProp)(t,p)}):(r.if((0,Qi._)`${u} && (${(0,yn.checkMissingProp)(t,s,i)})`),(0,yn.reportMissingProp)(t,i),r.else())}}pt.validatePropertyDeps=pc;function mc(t,e=t.schema){let{gen:r,data:n,keyword:a,it:i}=t,o=r.name("valid");for(let s in e)(0,Am.alwaysValidSchema)(i,e[s])||(r.if((0,yn.propertyInData)(r,n,s,i.opts.ownProperties),()=>{let u=t.subschema({keyword:a,schemaProp:s},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}pt.validateSchemaDeps=mc;pt.default=jm});var yc=R(Xi=>{"use strict";f();Object.defineProperty(Xi,"__esModule",{value:!0});var gc=U(),qm=J(),Mm={message:"property name must be valid",params:({params:t})=>(0,gc._)`{propertyName: ${t.propertyName}}`},xm={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Mm,code(t){let{gen:e,schema:r,data:n,it:a}=t;if((0,qm.alwaysValidSchema)(a,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,gc.not)(i),()=>{t.error(!0),a.allErrors||e.break()})}),t.ok(i)}};Xi.default=xm});var Zi=R(Yi=>{"use strict";f();Object.defineProperty(Yi,"__esModule",{value:!0});var la=Le(),Ze=U(),Fm=Et(),ca=J(),zm={message:"must NOT have additional properties",params:({params:t})=>(0,Ze._)`{additionalProperty: ${t.additionalProperty}}`},Lm={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zm,code(t){let{gen:e,schema:r,parentSchema:n,data:a,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:s,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,ca.alwaysValidSchema)(o,r))return;let p=(0,la.allSchemaProperties)(n.properties),m=(0,la.allSchemaProperties)(n.patternProperties);h(),t.ok((0,Ze._)`${i} === ${Fm.default.errors}`);function h(){e.forIn("key",a,S=>{!p.length&&!m.length?v(S):e.if($(S),()=>v(S))})}function $(S){let b;if(p.length>8){let j=(0,ca.schemaRefOrVal)(o,n.properties,"properties");b=(0,la.isOwnProperty)(e,j,S)}else p.length?b=(0,Ze.or)(...p.map(j=>(0,Ze._)`${S} === ${j}`)):b=Ze.nil;return m.length&&(b=(0,Ze.or)(b,...m.map(j=>(0,Ze._)`${(0,la.usePattern)(t,j)}.test(${S})`))),(0,Ze.not)(b)}function w(S){e.code((0,Ze._)`delete ${a}[${S}]`)}function v(S){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){w(S);return}if(r===!1){t.setParams({additionalProperty:S}),t.error(),s||e.break();return}if(typeof r=="object"&&!(0,ca.alwaysValidSchema)(o,r)){let b=e.name("valid");u.removeAdditional==="failing"?(_(S,b,!1),e.if((0,Ze.not)(b),()=>{t.reset(),w(S)})):(_(S,b),s||e.if((0,Ze.not)(b),()=>e.break()))}}function _(S,b,j){let D={keyword:"additionalProperties",dataProp:S,dataPropType:ca.Type.Str};j===!1&&Object.assign(D,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(D,b)}}};Yi.default=Lm});var $c=R(to=>{"use strict";f();Object.defineProperty(to,"__esModule",{value:!0});var Um=an(),vc=Le(),eo=J(),_c=Zi(),Bm={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:a,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&_c.default.code(new Um.KeywordCxt(i,_c.default,"additionalProperties"));let o=(0,vc.allSchemaProperties)(r);for(let h of o)i.definedProperties.add(h);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=eo.mergeEvaluated.props(e,(0,eo.toHash)(o),i.props));let s=o.filter(h=>!(0,eo.alwaysValidSchema)(i,r[h]));if(s.length===0)return;let u=e.name("valid");for(let h of s)p(h)?m(h):(e.if((0,vc.propertyInData)(e,a,h,i.opts.ownProperties)),m(h),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(h),t.ok(u);function p(h){return i.opts.useDefaults&&!i.compositeRule&&r[h].default!==void 0}function m(h){t.subschema({keyword:"properties",schemaProp:h,dataProp:h},u)}}};to.default=Bm});var bc=R(ro=>{"use strict";f();Object.defineProperty(ro,"__esModule",{value:!0});var wc=Le(),ua=U(),Sc=J(),Ic=J(),Km={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:a,it:i}=t,{opts:o}=i,s=(0,wc.allSchemaProperties)(r),u=s.filter(_=>(0,Sc.alwaysValidSchema)(i,r[_]));if(s.length===0||u.length===s.length&&(!i.opts.unevaluated||i.props===!0))return;let p=o.strictSchema&&!o.allowMatchingProperties&&a.properties,m=e.name("valid");i.props!==!0&&!(i.props instanceof ua.Name)&&(i.props=(0,Ic.evaluatedPropsToName)(e,i.props));let{props:h}=i;$();function $(){for(let _ of s)p&&w(_),i.allErrors?v(_):(e.var(m,!0),v(_),e.if(m))}function w(_){for(let S in p)new RegExp(_).test(S)&&(0,Sc.checkStrictMode)(i,`property ${S} matches pattern ${_} (use allowMatchingProperties)`)}function v(_){e.forIn("key",n,S=>{e.if((0,ua._)`${(0,wc.usePattern)(t,_)}.test(${S})`,()=>{let b=u.includes(_);b||t.subschema({keyword:"patternProperties",schemaProp:_,dataProp:S,dataPropType:Ic.Type.Str},m),i.opts.unevaluated&&h!==!0?e.assign((0,ua._)`${h}[${S}]`,!0):!b&&!i.allErrors&&e.if((0,ua.not)(m),()=>e.break())})})}}};ro.default=Km});var Ec=R(no=>{"use strict";f();Object.defineProperty(no,"__esModule",{value:!0});var Hm=J(),Gm={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Hm.alwaysValidSchema)(n,r)){t.fail();return}let a=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),t.failResult(a,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};no.default=Gm});var Pc=R(ao=>{"use strict";f();Object.defineProperty(ao,"__esModule",{value:!0});var Wm=Le(),Jm={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Wm.validateUnion,error:{message:"must match a schema in anyOf"}};ao.default=Jm});var Rc=R(io=>{"use strict";f();Object.defineProperty(io,"__esModule",{value:!0});var da=U(),Qm=J(),Xm={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,da._)`{passingSchemas: ${t.passing}}`},Ym={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Xm,code(t){let{gen:e,schema:r,parentSchema:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),s=e.let("passing",null),u=e.name("_valid");t.setParams({passing:s}),e.block(p),t.result(o,()=>t.reset(),()=>t.error(!0));function p(){i.forEach((m,h)=>{let $;(0,Qm.alwaysValidSchema)(a,m)?e.var(u,!0):$=t.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},u),h>0&&e.if((0,da._)`${u} && ${o}`).assign(o,!1).assign(s,(0,da._)`[${s}, ${h}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(s,h),$&&t.mergeEvaluated($,da.Name)})})}}};io.default=Ym});var Tc=R(oo=>{"use strict";f();Object.defineProperty(oo,"__esModule",{value:!0});var Zm=J(),eh={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let a=e.name("valid");r.forEach((i,o)=>{if((0,Zm.alwaysValidSchema)(n,i))return;let s=t.subschema({keyword:"allOf",schemaProp:o},a);t.ok(a),t.mergeEvaluated(s)})}};oo.default=eh});var Nc=R(so=>{"use strict";f();Object.defineProperty(so,"__esModule",{value:!0});var fa=U(),kc=J(),th={message:({params:t})=>(0,fa.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,fa._)`{failingKeyword: ${t.ifClause}}`},rh={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:th,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,kc.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let a=Cc(n,"then"),i=Cc(n,"else");if(!a&&!i)return;let o=e.let("valid",!0),s=e.name("_valid");if(u(),t.reset(),a&&i){let m=e.let("ifClause");t.setParams({ifClause:m}),e.if(s,p("then",m),p("else",m))}else a?e.if(s,p("then")):e.if((0,fa.not)(s),p("else"));t.pass(o,()=>t.error(!0));function u(){let m=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);t.mergeEvaluated(m)}function p(m,h){return()=>{let $=t.subschema({keyword:m},s);e.assign(o,s),t.mergeValidEvaluated($,o),h?e.assign(h,(0,fa._)`${m}`):t.setParams({ifClause:m})}}}};function Cc(t,e){let r=t.schema[e];return r!==void 0&&!(0,kc.alwaysValidSchema)(t,r)}so.default=rh});var Oc=R(lo=>{"use strict";f();Object.defineProperty(lo,"__esModule",{value:!0});var nh=J(),ah={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,nh.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};lo.default=ah});var Dc=R(co=>{"use strict";f();Object.defineProperty(co,"__esModule",{value:!0});var ih=Ki(),oh=cc(),sh=Hi(),lh=dc(),ch=fc(),uh=hc(),dh=yc(),fh=Zi(),ph=$c(),mh=bc(),hh=Ec(),gh=Pc(),yh=Rc(),vh=Tc(),_h=Nc(),$h=Oc();function wh(t=!1){let e=[hh.default,gh.default,yh.default,vh.default,_h.default,$h.default,dh.default,fh.default,uh.default,ph.default,mh.default];return t?e.push(oh.default,lh.default):e.push(ih.default,sh.default),e.push(ch.default),e}co.default=wh});var Ac=R(uo=>{"use strict";f();Object.defineProperty(uo,"__esModule",{value:!0});var de=U(),Sh={message:({schemaCode:t})=>(0,de.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,de._)`{format: ${t}}`},Ih={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Sh,code(t,e){let{gen:r,data:n,$data:a,schema:i,schemaCode:o,it:s}=t,{opts:u,errSchemaPath:p,schemaEnv:m,self:h}=s;if(!u.validateFormats)return;a?$():w();function $(){let v=r.scopeValue("formats",{ref:h.formats,code:u.code.formats}),_=r.const("fDef",(0,de._)`${v}[${o}]`),S=r.let("fType"),b=r.let("format");r.if((0,de._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(S,(0,de._)`${_}.type || "string"`).assign(b,(0,de._)`${_}.validate`),()=>r.assign(S,(0,de._)`"string"`).assign(b,_)),t.fail$data((0,de.or)(j(),D()));function j(){return u.strictSchema===!1?de.nil:(0,de._)`${o} && !${b}`}function D(){let V=m.$async?(0,de._)`(${_}.async ? await ${b}(${n}) : ${b}(${n}))`:(0,de._)`${b}(${n})`,T=(0,de._)`(typeof ${b} == "function" ? ${V} : ${b}.test(${n}))`;return(0,de._)`${b} && ${b} !== true && ${S} === ${e} && !${T}`}}function w(){let v=h.formats[i];if(!v){j();return}if(v===!0)return;let[_,S,b]=D(v);_===e&&t.pass(V());function j(){if(u.strictSchema===!1){h.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${i}" ignored in schema at path "${p}"`}}function D(T){let Se=T instanceof RegExp?(0,de.regexpCode)(T):u.code.formats?(0,de._)`${u.code.formats}${(0,de.getProperty)(i)}`:void 0,qe=r.scopeValue("formats",{key:i,ref:T,code:Se});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,de._)`${qe}.validate`]:["string",T,qe]}function V(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!m.$async)throw new Error("async format in sync schema");return(0,de._)`await ${b}(${n})`}return typeof S=="function"?(0,de._)`${b}(${n})`:(0,de._)`${b}.test(${n})`}}}};uo.default=Ih});var jc=R(fo=>{"use strict";f();Object.defineProperty(fo,"__esModule",{value:!0});var bh=Ac(),Eh=[bh.default];fo.default=Eh});var Vc=R(Or=>{"use strict";f();Object.defineProperty(Or,"__esModule",{value:!0});Or.contentVocabulary=Or.metadataVocabulary=void 0;Or.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Or.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Mc=R(po=>{"use strict";f();Object.defineProperty(po,"__esModule",{value:!0});var Ph=Kl(),Rh=ic(),Th=Dc(),Ch=jc(),qc=Vc(),kh=[Ph.default,Rh.default,(0,Th.default)(),Ch.default,qc.metadataVocabulary,qc.contentVocabulary];po.default=kh});var xc=R(vn=>{"use strict";f();Object.defineProperty(vn,"__esModule",{value:!0});vn.DiscrError=void 0;var Nh;(function(t){t.Tag="tag",t.Mapping="mapping"})(Nh=vn.DiscrError||(vn.DiscrError={}))});var zc=R(ho=>{"use strict";f();Object.defineProperty(ho,"__esModule",{value:!0});var Dr=U(),mo=xc(),Fc=Xn(),Oh=J(),Dh={message:({params:{discrError:t,tagName:e}})=>t===mo.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Dr._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Ah={keyword:"discriminator",type:"object",schemaType:"object",error:Dh,code(t){let{gen:e,data:r,schema:n,parentSchema:a,it:i}=t,{oneOf:o}=a;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let s=n.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),p=e.const("tag",(0,Dr._)`${r}${(0,Dr.getProperty)(s)}`);e.if((0,Dr._)`typeof ${p} == "string"`,()=>m(),()=>t.error(!1,{discrError:mo.DiscrError.Tag,tag:p,tagName:s})),t.ok(u);function m(){let w=$();e.if(!1);for(let v in w)e.elseIf((0,Dr._)`${p} === ${v}`),e.assign(u,h(w[v]));e.else(),t.error(!1,{discrError:mo.DiscrError.Mapping,tag:p,tagName:s}),e.endIf()}function h(w){let v=e.name("valid"),_=t.subschema({keyword:"oneOf",schemaProp:w},v);return t.mergeEvaluated(_,Dr.Name),v}function $(){var w;let v={},_=b(a),S=!0;for(let V=0;V<o.length;V++){let T=o[V];(T==null?void 0:T.$ref)&&!(0,Oh.schemaHasRulesButRef)(T,i.self.RULES)&&(T=Fc.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T==null?void 0:T.$ref),T instanceof Fc.SchemaEnv&&(T=T.schema));let Se=(w=T==null?void 0:T.properties)===null||w===void 0?void 0:w[s];if(typeof Se!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);S=S&&(_||b(T)),j(Se,V)}if(!S)throw new Error(`discriminator: "${s}" must be required`);return v;function b({required:V}){return Array.isArray(V)&&V.includes(s)}function j(V,T){if(V.const)D(V.const,T);else if(V.enum)for(let Se of V.enum)D(Se,T);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function D(V,T){if(typeof V!="string"||V in v)throw new Error(`discriminator: "${s}" values must be unique strings`);v[V]=T}}}};ho.default=Ah});var Lc=R((qv,jh)=>{jh.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Kc=R((ge,Bc)=>{"use strict";f();Object.defineProperty(ge,"__esModule",{value:!0});ge.CodeGen=ge.Name=ge.nil=ge.stringify=ge.str=ge._=ge.KeywordCxt=void 0;var Vh=xl(),qh=Mc(),Mh=zc(),Uc=Lc(),xh=["/properties"],pa="http://json-schema.org/draft-07/schema",ma=class extends Vh.default{_addVocabularies(){super._addVocabularies(),qh.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Mh.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Uc,xh):Uc;this.addMetaSchema(e,pa,!1),this.refs["http://json-schema.org/schema"]=pa}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(pa)?pa:void 0)}};Bc.exports=ge=ma;Object.defineProperty(ge,"__esModule",{value:!0});ge.default=ma;var Fh=an();Object.defineProperty(ge,"KeywordCxt",{enumerable:!0,get:function(){return Fh.KeywordCxt}});var Ar=U();Object.defineProperty(ge,"_",{enumerable:!0,get:function(){return Ar._}});Object.defineProperty(ge,"str",{enumerable:!0,get:function(){return Ar.str}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return Ar.stringify}});Object.defineProperty(ge,"nil",{enumerable:!0,get:function(){return Ar.nil}});Object.defineProperty(ge,"Name",{enumerable:!0,get:function(){return Ar.Name}});Object.defineProperty(ge,"CodeGen",{enumerable:!0,get:function(){return Ar.CodeGen}})});f();var Ft=he(ye());f();var qu=he(Vu());f();function Aa(t){return He(t).collection("space-installations")}function jn(t,e){return Aa(t).doc(e)}function gs(t){return`${Go(t.integration)}/installations/${t.installation}/spaces/${t.space}/space`}var gg=xo("integration:events");function Mu(){return Fo().collection("integration-events")}function ys(t){return Mu().where("integration","==",t)}f();function vs(t,e){let{integration:r,target:n,createdBy:a,spaceSelection:i}=e,o={key:Rn(r.name,n),target:n,scopes:r.scopes,status:"pending",integration:r.name,edits:vr(a),spaces:[],spaceSelection:i||"selected"};return t.set(He(o.key),o),t.update(Ur(r.name),{installations:Rt.firestore.FieldValue.increment(1)}),o}function _s(t,e){t.delete(He(e.key)),t.update(Ur(e.integration),{installations:Rt.firestore.FieldValue.increment(-1)})}function $s(t,e,r,n){let a=He(e);t.update(a,{configurations:r}),n&&En(t,a,"edits",vr([n]))}function ws(t,e,r,n){let a=He(e);t.update(a,{spaceSelection:r}),En(t,a,"edits",vr([n]))}function Ss(t,e){let{installation:r,space:n,createdBy:a}=e,i={space:n.key,status:"pending",integration:r.integration,installation:r.key,edits:vr(a)};return t.set(jn(r.key,i.space),i),t.update(He(r.key),{spaces:Rt.firestore.FieldValue.arrayUnion(n.key)}),t.update(zr(n.key),{[`integrations.${r.integration}`]:Rt.firestore.FieldValue.increment(1)}),i}function Is(t,e,r={}){t.delete(jn(e.installation,e.space)),r.withInstallationDeleted||t.update(He(e.installation),{spaces:Rt.firestore.FieldValue.arrayRemove(e.space)}),r.withSpaceDeleted||t.update(zr(e.space),{[`integrations.${e.integration}`]:Rt.firestore.FieldValue.increment(-1)})}function bs(t,e,r,n){let a=jn(e.installation,e.space);t.update(a,{configuration:r}),n&&En(t,a,"edits",vr([n]))}f();var me=he(ye());lt();function Vn(t){let o=t,{schema:e,value:r,onChangeValue:n}=o,a=st(o,["schema","value","onChangeValue"]),i=[...new Set([...e.required||[],...Object.keys(e.properties)])];return me.createElement(I,null,i.map((s,u)=>{let p=e.properties[s];return me.createElement(I,{style:[u<i.length-1?E.Margin.largeBottom:null]},me.createElement(Fu,k({schema:p,value:r[s],globalValue:r,onChangeValue:m=>{n(ue(k({},r),{[s]:m}))}},a)))}))}function Fu(t){let{propertyKey:e,schema:r,value:n,onChangeValue:a}=t,i=r.title||e,o=r.description;switch(r.type){case"string":return r.enum?me.createElement(Lu,k({},t)):r.completion_url?me.createElement(Uu,k({},t)):me.createElement(Ra,{label:i,labelDescription:o,value:ja(n,r.default,""),onChangeText:a,placeholder:r.default||""});case"number":return me.createElement(Ra,{label:r.title||e,labelDescription:o,value:`${ja(n,r.default,0)}`,onChangeText:()=>{a(parseInt(n,10))}});case"boolean":return me.createElement(Cn,{label:r.title||e,labelDescription:o,value:ja(n,r.default,!1),onValueChange:a});case"button":return me.createElement(zu,k({},t));default:Tt(r)}}function zu(t){let{value:e,schema:r,propertyKey:n,onChangeValue:a,onNavigationTo:i}=t,o=()=>{i(r.callback_url)},s=()=>{a(void 0)};return me.createElement(Wt,{label:r.title||n,labelDescription:r.description},me.createElement(ve,{kind:"secondary",size:"medium",onPress:o},r.button_text),e?me.createElement(ve,{kind:"secondary",size:"medium",icon:L.X,style:E.Margin.smallLeft,onPress:s}):null)}function Lu(t){let{value:e,schema:r,propertyKey:n}=t;return me.createElement(is,{label:r.title||n,labelDescription:r.description,value:e,onValueChange:t.onChangeValue,items:r.enum.map(a=>({label:a,value:a}))})}function Uu(t){let{value:e,schema:r,propertyKey:n,globalValue:a}=t,[i,o]=me.useState(null),[s,u]=Tn(!1),p=()=>_r({search:"Select item...",groups:[{key:"items",commands:(i||[]).map(h=>({key:h.value,title:h.label,trigger:()=>{t.onChangeValue(h.value)}}))}]});me.useEffect(()=>{i||u(async()=>{try{let h=await t.onFetchResource(r.completion_url);o(h)}catch(h){o(null)}})},[a]);let m=i==null?void 0:i.find(h=>h.value===e);return me.createElement(Wt,{label:r.title||n,labelDescription:r.description},me.createElement($r,{size:"medium",kind:"secondary",disabled:s||!i,rightIcon:s?void 0:L.ChevronDown,icon:s?$t:void 0,palettePosition:{width:"anchor"},palette:p},m&&!s?m.label:null))}function ja(t,e,r){return typeof t<"u"?t:typeof e<"u"?e:r}f();var ae=he(ye());lt();var Bu=Ea.createInteractiveComponent(Pa);function Es(t){let p=t,{icon:e,installStatus:r,title:n,subtitle:a,details:i,style:o}=p,s=st(p,["icon","installStatus","title","subtitle","details","style"]),[,u]=be(Ge);return ae.createElement(ss,k({style:[x.directionColumn,E.Padding.medium,x.flex1,o]},s),ae.createElement(I,{style:[x.directionRow]},e?ae.createElement(Ku,{icon:e}):null,ae.createElement(I,{style:[x.flex1]},ae.createElement(I,null,ae.createElement(I,null,ae.createElement(Bu.Child,{style:[u.Body,u.Medium,u.text],activeStyle:u.primary},n,r?ae.createElement(Hu,{installStatus:r,style:[E.Margin.smallLeft]}):null)),a?ae.createElement(I,null,ae.createElement(Pa,{style:[u.Caption,u.textMid]},a)):null),i&&!a?ae.createElement(I,{style:[x.flex1,E.Margin.smallTop]},ae.createElement(ce,{style:[u.Body,u.textMuted]},i)):null)),i&&a?ae.createElement(I,{style:[E.Margin.mediumTop,x.flex1]},ae.createElement(ce,{style:[u.Body,u.textMuted]},i)):null)}function Ku(t){let{icon:e}=t,[,r]=be(Ge),[,n]=be(Gu),a=ct.M,i=a/6,o=a-2*i,s=Ea.useInteractiveComponent(e);return ae.createElement(I,{style:[E.Margin.mediumRight,x.alignSelfBaseline,n.cardIconBordered,{width:a,height:a,borderRadius:a/6,padding:i}]},ae.createElement(s.Child,{size:o,style:[r.textMuted],hoverStyle:r.primary}))}function Hu(t){let{installStatus:e,style:r}=t;return e==="installed_on_account"?ae.createElement(I,{style:[r]},ae.createElement(Nt,{icon:L.Dot,kind:"warning",size:"small"},"Installed on the account")):e==="pending"?ae.createElement(I,{style:[r]},ae.createElement(Nt,{icon:L.Dot,kind:"warning",size:"small"},"Configuring")):e==="pause"?ae.createElement(I,{style:[r]},ae.createElement(Nt,{icon:L.Dot,kind:"warning",size:"small"},"Paused")):ae.createElement(I,{style:[r]},ae.createElement(Nt,{icon:L.Check,kind:"success",size:"small"},"Installed"))}var Gu=kt.create({cardIconBordered:t=>({borderWidth:1,borderColor:t.colors.border.mid,borderRadius:ct.RADIUS_M,padding:E.small,backgroundColor:"#ffffff",boxShadow:"0px 0px 4px inset rgba(0,0,0, 0.08)"})});f();var Y=he(ye());lt();f();function Ps(t){switch(t){case"analytics":return"Analytics";case"collaboration":return"Collaboration";case"other":return"Other";default:Tt(t)}}f();function Rs(t){switch(t){case"space:views:read":return{title:"Read Page Views",description:"Can query and listen to page views on a space."};case"space:content:read":return{title:"Read Content",description:"Can access content of a space."};case"space:content:write":return{title:"Write Content",description:"Can update the content of a space."};case"space:metadata:read":return{title:"Read Space Metadata",description:"Can access the space information."};case"space:metadata:write":return{title:"Write Space Metadata",description:"Can update the space information."};default:Tt(t)}}f();var Ot=he(ye());function qn(t){let{integration:e}=t,[r,n]=We([e.organization?Lr(e.organization):null,e.user?Pn(e.user):null]);return r?Ot.createElement(Ot.Fragment,null,r.title):n?Ot.createElement(Ot.Fragment,null,n.displayName):Ot.createElement(Ot.Fragment,null,"Unknown")}f();var Qt=he(ye());function Mn(t){return Qt.createElement(Qt.Suspense,{fallback:Qt.createElement(ve,{disabled:!0,icon:$t,size:t.size},"Loading")},Qt.createElement(Wu,k({},t)))}function Wu(t){let u=t,{target:e}=u,r=st(u,["target"]),n=Fe(),{navigate:a}=Sr(),[i,o]=We([e.organization?Lr(e.organization):null,e.user?Pn(e.user):null]);if(!i&&!o)return null;let s=()=>_r({search:"Select organizations\u2026",groups:[{key:"user",commands:[{key:n.uid,title:n.displayName,icon:ut(Na,{user:n}),trigger:()=>{a({current:{type:"integrations",organization:void 0,space:void 0}})}}]},{key:"organizations",commands:()=>{let[p]=ka([Uo(n.uid)]);return ka(p.map(h=>Lr(h.organization))).filter(Lo).map(h=>({key:h.key,title:h.title,icon:ut(Oa,{org:h}),trigger:()=>{a({current:{type:"integrations",organization:h.key,space:void 0}})}}))}}]});return Qt.createElement($r,ue(k({kind:"secondary",title:`Switch account to install
integrations into.`,icon:i?ut(Oa,{org:i}):ut(Na,{user:o}),rightIcon:L.ChevronDown},r),{palette:s}),(i==null?void 0:i.title)||(o==null?void 0:o.displayName))}f();function Ts(t){let e=Fe(),r=ps();return t?t.user!==void 0?t.user===e.uid:Ko(r.permissions.organizations[t.organization],"admin-integrations"):!1}f();var Hc=he(Kc());function go(t,e,r={}){var u;let n=(u=t.configurations)==null?void 0:u[e];if(!n)return!0;let a=Wo(n);return!!new Hc.default({strictSchema:!1}).compile(a)(r)}f();var ke=he(ye());lt();f();var ha=he(ye());function ga(t){let h=t,{target:e,space:r,integration:n,installation:a}=h,i=st(h,["target","space","integration","installation"]),[o,s]=Tn(),u=wr(),p=Fe(),m=async()=>{try{await s(async()=>{await Ht($=>{let w=a;w||(w=vs($,{integration:n,createdBy:p.uid,target:e}),Ct({type:"integration_install",integration:n.name,organization:e.organization,withSpaceInstallation:!!r})),r&&(Ss($,{installation:w,space:r,createdBy:p.uid}),Ct({type:"integration_space_install",integration:n.name,organization:e.organization,space:r.key,withAccountInstallation:!a}))})}),u.notify({icon:L.Check,kind:"success",title:"Integration installed",details:`${n.title} has been successfully installed.`})}catch($){throw u.notify({icon:L.Warning,kind:"danger",title:"Error installing integration",details:yr($)}),$}};return a&&r&&!a.spaces.includes(r.key)?ha.createElement(ve,k({disabled:o,icon:o?$t:void 0,size:"large",kind:"primary",onPress:m},i),"Add to Space"):a?ha.createElement(ve,k({disabled:!0,icon:L.Check,size:"large",kind:"secondary",onPress:()=>{}},i),"Installed"):ha.createElement(ve,k({disabled:o,icon:o?$t:void 0,size:"large",kind:"primary",onPress:m},i),"Install")}function Wc(t){let{target:e,integration:r}=t,[,n]=be(Ge);return ke.createElement(I,{style:[E.Margin.xlargeBottom,E.Margin.xlargeTop]},ke.createElement(I,{style:[x.directionRow,x.alignCenter,E.Margin.mediumBottom]},ke.createElement(Dn,{icon:L.ArrowLeft,to:{current:{integration:void 0}}},"Back to integrations")),ke.createElement(I,{style:[x.directionRow,x.alignCenter,E.Padding.mediumHorizontal]},ke.createElement(I,null,ke.createElement(hs,{integration:r,size:ct.XL})),ke.createElement(I,{style:[E.Margin.largeLeft,x.flex1]},ke.createElement(I,null,ke.createElement(ce,{style:[n.Heading1,n.text],selectable:!0},r.title)),ke.createElement(I,null,ke.createElement(ce,{style:[n.Body,n.textMid],selectable:!0},r.description))),ke.createElement(I,{style:[x.directionRow,E.Margin.xlargeLeft]},ke.createElement(ga,ue(k({},t),{style:E.Margin.smallRight})),ke.createElement(Mn,{target:e}))))}f();var O=he(ye());lt();function Jc(t){var o;let{integration:e,installation:r,children:n}=t,[,a]=be(Ge),[,i]=be(Uh);return O.createElement(I,{style:[i.sidebar,E.Margin.xlargeRight]},O.createElement(I,{style:i.sidebarSticky},n,O.createElement(I,{style:E.Padding.xsmallHorizontal},O.createElement(I,{style:E.Padding.smallHorizontal},r?O.createElement(O.Fragment,null,O.createElement(I,{style:E.Margin.largeBottom},O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.textMid]},"Installed")),O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.text]},O.createElement(rs,{value:((o=zo(r.edits))==null?void 0:o.updatedAt.toDate())||new Date,onlyDate:!1})))),O.createElement(I,{style:E.Margin.largeBottom},O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.textMid]},"Configured on")),O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.text]},r.spaces.length," ",O.createElement(cs,{count:r.spaces.length,singular:"space",plural:"spaces"}))))):null,e.categories.length>0?O.createElement(I,{style:E.Margin.largeBottom},O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.textMid]},"Categories")),O.createElement(I,null,O.createElement(zh,{integration:e}))):null,e.scopes.length>0?O.createElement(I,{style:E.Margin.largeBottom},O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.textMid]},"Permissions")),O.createElement(I,null,O.createElement(Lh,{integration:e}))):null,O.createElement(I,null,O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.textMid]},"Built by")),O.createElement(I,null,O.createElement(ce,{style:[a.Label,a.text]},O.createElement(qn,{integration:e}))))))))}function zh(t){let{integration:e}=t;return O.createElement(O.Fragment,null,e.categories.map(r=>O.createElement(Nt,{key:r,size:"medium",style:[E.Margin.xsmallTop,E.Margin.xsmallRight]},Ps(r))))}function Lh(t){let{integration:e}=t;return O.createElement(O.Fragment,null,e.scopes.map(r=>{let n=Rs(r);return O.createElement(os,{key:n.title,tooltip:n.description},(a,i)=>O.createElement(Nt,k({ref:i,size:"medium",style:[E.Margin.xsmallTop,E.Margin.xsmallRight]},a.events),n.title))}))}var Uh=kt.create({sidebar:t=>({width:180}),sidebarSticky:{position:"sticky",top:E.medium}});f();var Ke=he(ye());lt();function Qc(t){var r;let{integration:e}=t;return Ke.createElement(I,null,((r=e.previewImages)==null?void 0:r.length)>0?Ke.createElement(Bh,{images:e.previewImages}):null,Ke.createElement(Kh,{summary:e.summary}),Ke.createElement(Hh,{externalLinks:e.externalLinks}))}function Bh(t){let{images:e}=t;return Ke.createElement(I,{style:E.Margin.largeBottom},Ke.createElement(Yo,{source:{uri:On(e[0],{width:1024})},style:[{width:"100%",aspectRatio:"16 / 9",borderRadius:ct.RADIUS_L}]}))}function Kh(t){let{summary:e}=t,[,r]=be(Ge),n=e.split(`
`);return Ke.createElement(I,null,n.map((a,i)=>Ke.createElement(I,{key:i,style:[E.Margin.mediumBottom]},Ke.createElement(ce,{selectable:!0,style:[r.Body,r.text]},a))))}function Hh(t){let{externalLinks:e}=t;return e!=null&&e.length?Ke.createElement(I,{style:[x.directionRow]},e.map((r,n)=>Ke.createElement(ve,{key:n,icon:L.Link,href:r.url,kind:"link",style:[E.Margin.mediumRight,E.Margin.mediumBottom]},r.label))):null}f();var or=he(ye());f();var Ve=he(ye());lt();function Xc(t){let{integration:e}=t,[r,n,a]=ds(ys(e.name).orderBy("createdAt","desc"),20),i=Ve.useCallback(o=>{let s=o.item;return Ve.createElement(Gh,{event:s})},[]);return Ve.createElement(Ve.Fragment,null,r.length===0?Ve.createElement(wt,null,"No events have been dispatched yet."):Ve.createElement(ns,{data:r,getTime:Wh,renderItem:i,ListFooterComponent:n?Ve.createElement(I,{style:[E.Padding.largeHorizontal,E.Padding.mediumVertical]},Ve.createElement(ve,{kind:"secondary",icon:a?$t:L.ArrowDown,onPress:n,disabled:a},"Load more")):null}))}function Gh(t){let{event:e}=t;return Ve.createElement(as,{icon:r=>Ve.createElement(ts,k(k({},Jh(e)),r)),title:e.payload.type,hint:e.createdAt.toDate().toISOString(),onPress:()=>{}})}function Wh(t){return t.createdAt.toDate()}function Jh(t){switch(t.status){case"scheduled":return{icon:L.Clock,kind:"warning"};case"delivered":return{icon:L.Check,kind:"success"};case"failed":return{icon:L.Alert,kind:"danger"};default:Tt(t.status)}}function Yc(t){let{integration:e}=t;return or.createElement(Jt,{title:"Logs",withDefaultPadding:!1},or.createElement(or.Suspense,{fallback:or.createElement(Gt,{size:"medium"})},or.createElement(Xc,{integration:e})))}f();var Z=he(ye());f();var et=he(ye());lt();function Zc(t){var $;let{integration:e,installation:r,spaceInstallation:n,onFetchResource:a,onNavigationTo:i}=t,o=Fe(),[s,u]=et.useState(null),p=wr(),m=()=>{u("uninstall")},h=async w=>{if(u(null),w)try{await Ht(v=>{Is(v,n)}),Ct({type:"integration_space_uninstall",integration:e.name,space:n.space,organization:r.target.organization}),p.notify({icon:L.Check,kind:"success",title:"Integration deactivated",details:`${e.title} has been successfully removed from your space.`})}catch(v){throw p.notify({icon:L.Warning,kind:"danger",title:"Error deactivating integration",details:yr(v)}),v}};return et.createElement(et.Fragment,null,s==="uninstall"?et.createElement(Nn,{kind:"danger",title:`Uninstall "${e.title}" integration?`,confirmButtonText:"Uninstall",onComplete:h},"The integration will be removed from your space. You can also choose to suspend it instead."):null,($=e.configurations)!=null&&$.space?et.createElement(I,{style:E.Margin.largeBottom},et.createElement(Vn,{schema:k({type:"object"},e.configurations.space),value:n.configuration||{},onChangeValue:w=>{bn(v=>{bs(v,n,w,o.uid)})},onFetchResource:a,onNavigationTo:i})):null,et.createElement(Wt,{label:"Deactivate for this space",labelDescription:"This will deactivate the integration from interacting with this space."},et.createElement(ve,{size:"medium",kind:"danger",onPress:m},"Deactivate")))}f();var eu=he(ye());function yo(t){let m=t,{target:e,space:r,installation:n}=m,a=st(m,["target","space","installation"]),{navigate:i}=Sr(),{spaces:o}=ms(e.user!==void 0?{user:e.user}:{organization:e.organization}),s=o.filter(h=>n.spaces.includes(h.key)),u=o.filter(h=>!n.spaces.includes(h.key)),p=()=>{let h=$=>({key:$.key,title:$.title||ba,icon:ut(Da,{space:$}),checked:n.spaces.includes($.key),trigger:()=>{i({current:{type:"integrations",organization:$.organization,space:$.key}})}});return _r({search:"Select spaces\u2026",groups:[{key:"installed",title:`Already installed (${s.length})`,commands:s.map(h)},{key:"non-installed",title:`Not installed (${u.length})`,commands:u.map(h)}]})};return eu.createElement($r,k({icon:r?ut(Da,{space:r}):void 0,rightIcon:L.ChevronDown,palette:p},a),r?r.title||ba:"Pick a space")}function tu(t){var b,j,D;let{target:e,space:r,spaceInstallations:n,integration:a,installation:i}=t,o=Fe(),s=us(),[u,p]=Z.useState(null),m=wr(),h=r?n.find(V=>V.space===r.key):void 0,$=go(a,"account",(b=i.configurations)==null?void 0:b.account),w=go(a,"space",h==null?void 0:h.configuration),v=()=>{p("uninstall")},_=async V=>{if(p(null),V)try{await Ht(T=>{_s(T,i)}),Ct({type:"integration_uninstall",integration:a.name,organization:i.target.organization,installedSpaces:i.spaces.length}),m.notify({icon:L.Check,kind:"success",title:"Integration uninstalled",details:`${a.title} has been successfully removed from this account.`})}catch(T){throw m.notify({icon:L.Warning,kind:"danger",title:"Error uninstalling integration",details:yr(T)}),T}},S=V=>({onFetchResource:async T=>{var qe;return await fetch(V+T,{headers:{"x-gitbook-id-token":(qe=await(s==null?void 0:s.getIdToken()))!=null?qe:""}}).then(mt=>mt.ok?mt.json():Promise.reject(mt))},onNavigationTo:T=>{window.open(V+T,"_blank",`popup=1,top=${(window.innerHeight-550)/2},left=${(window.innerWidth-640)/2},width=${640},height=${550}`)}});return Z.createElement(Z.Fragment,null,u==="uninstall"?Z.createElement(Nn,{kind:"danger",title:`Uninstall "${a.title}" integration?`,confirmButtonText:"Uninstall",onComplete:_},"The integration will be removed from your account. You can also choose to suspend it instead."):null,$?null:Z.createElement(Ta,{kind:"warning",icon:L.Warning,title:"Finish configuration",details:Z.createElement(Z.Fragment,null,"This integration is not fully installed on this account. Complete the installation by configuring it below."),style:E.Margin.largeBottom}),$&&h&&!w?Z.createElement(Ta,{kind:"warning",icon:L.Warning,title:"Finish configuration",details:Z.createElement(Z.Fragment,null,"This integration is not fully installed on this space. Complete the installation by configuring it below."),style:E.Margin.largeBottom}):null,(j=a.configurations)!=null&&j.account?Z.createElement(Jt,{title:"Configuration",style:E.Margin.largeBottom},Z.createElement(Vn,k({schema:k({type:"object"},a.configurations.account),value:((D=i.configurations)==null?void 0:D.account)||{},onChangeValue:V=>{bn(T=>{$s(T,i.key,{account:V},o.uid)})}},S(Xo(i))))):null,Z.createElement(Jt,{title:"Space access",style:E.Margin.largeBottom},Z.createElement(Cn,{label:"Install on all spaces",labelDescription:"Automatically install the integration on all spaces. This applies to all current and future spaces.",value:i.spaceSelection==="all",onValueChange:V=>{let T=V?"all":"selected";Ht(Se=>{ws(Se,i.key,T,o.uid)}),Ct({type:"integration_installation_toggle_spaceselection",integration:a.name,organization:i.target.organization,spaceSelection:T})}})),Z.createElement(Jt,{title:"Space configuration",style:E.Margin.largeBottom,button:r?Z.createElement(yo,{space:r,target:e,installation:i,kind:"secondary",size:"medium"}):null},h?Z.createElement(Zc,k({integration:a,installation:i,spaceInstallation:h},S(gs(h)))):Z.createElement(Z.Fragment,null,r?Z.createElement(wt,{action:Z.createElement(ga,{target:e,space:r,installation:i,integration:a})},"Integration not enabled for this space."):Z.createElement(wt,{action:Z.createElement(yo,{space:r,target:e,installation:i,kind:"secondary",size:"large"})},"Select a space to install this integration on."))),Z.createElement(Jt,{title:"Danger zone"},Z.createElement(Wt,{label:`Uninstall "${a.title}"`,labelDescription:"This will remove the integration and revoke access to all spaces."},Z.createElement(ve,{size:"medium",kind:"danger",onPress:v},"Uninstall"))))}function ru(t){return Y.createElement(Y.Suspense,{fallback:Y.createElement(Gt,{size:"xlarge"})},Y.createElement(Qh,k({},t)))}function Qh(t){let{target:e,space:r,integrationKey:n}=t,[,a]=be(Xh),i=Rn(n,e),[o,s]=We([Ur(n),He(i)]),[u]=We([s?Aa(i):null]),[p,m]=Y.useState(s?"installation":"about"),h=Ts(o);return kn($=>{o&&$.setTitle(`${o.title} - Integrations`)}),An({screen:`integration_${p}`,integration:n,space:r==null?void 0:r.key,organization:e.organization},[p,n,r==null?void 0:r.key,e.organization]),Y.useEffect(()=>{m($=>!h&&$==="developer"?"about":s?"installation":"about")},[!!s,h]),o?Y.createElement(Mo,{style:[x.flex1]},Y.createElement(I,{style:[a.integrationHeader,x.directionRow,x.justifyContentCenter]},Y.createElement(I,{style:[x.flex1,a.integrationContentWrapper]},Y.createElement(Wc,{target:e,space:r,installation:s,integration:o}))),Y.createElement(I,{style:[E.Padding.xlargeVertical,x.directionRow,x.justifyContentCenter]},Y.createElement(I,{style:[x.flex1,a.integrationContentWrapper,E.Padding.mediumHorizontal]},Y.createElement(Y.Suspense,{fallback:Y.createElement(Gt,null)},Y.createElement(I,{style:[x.directionRow]},Y.createElement(Jc,{integration:o,installation:s},h||s?Y.createElement(St,{direction:"vertical",style:E.Margin.mediumBottom},s?Y.createElement(St.Tab,{active:p==="installation",onPress:()=>m("installation")},"Installation"):null,h?Y.createElement(St.Tab,{active:p==="developer",onPress:()=>m("developer")},"Developer Settings"):null,Y.createElement(St.Tab,{active:p==="about",onPress:()=>m("about")},"About")):null),Y.createElement(I,{style:x.flex1},p==="about"?Y.createElement(Qc,{integration:o}):null,p==="installation"&&s&&u?Y.createElement(tu,{target:e,space:r,integration:o,installation:s,spaceInstallations:u}):null,p==="developer"&&h?Y.createElement(Yc,{integration:o}):null)))))):Y.createElement(wt,{title:"Not found"},"The integration you are trying to access is not available.")}var Xh=kt.create({integrationHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.main,backgroundColor:t.colors.background.muted}),integrationContentWrapper:{maxWidth:1024},integrationsListBody:t=>({backgroundColor:t.colors.background.muted,borderTopWidth:1,borderTopColor:t.colors.border.main})});f();var q=he(ye());lt();f();var ya=he(ye());lt();function nu(t){let{integration:e,installation:r,spaceKey:n}=t,{getNavigationLinkProps:a}=Sr();return ya.createElement(Es,ue(k({},a({current:{type:"integrations",integration:e.name}})),{icon:e.iconURL?ut(Zo,{source:{uri:On(e.iconURL)}}):L.Integrations,title:e.title,subtitle:ya.createElement(ce,null,"by ",ya.createElement(qn,{integration:e})),details:e.description,installStatus:Yh(r,n)}))}function Yh(t,e){if(!!t)return e&&!t.spaces.includes(e)?"installed_on_account":t.status==="pending"?"pending":t.status==="paused"?"pause":"installed"}function au(t){let{space:e,target:r}=t,[n,a]=q.useState("all"),[,i]=be(Ge),[,o]=be(eg);return An({screen:"integrations_list",organization:r.organization},[r.user,r.organization]),q.createElement(I,{style:[x.flex1,x.directionColumn]},q.createElement(I,{style:[E.Padding.largeHorizontal]},q.createElement(I,{style:[E.Padding.largeTop,E.Padding.mediumHorizontal]},q.createElement(I,{style:[x.directionRow,E.Padding.smallLeft]},q.createElement(I,{style:[x.flex1,E.Padding.xsmallLeft]},q.createElement(I,{style:[x.directionRow,x.alignCenter,E.Margin.mediumBottom]},q.createElement(I,{style:E.Margin.smallRight},q.createElement(es,{size:ct.BUTTON_M,style:i.primary})),q.createElement(I,{style:E.Margin.smallRight},q.createElement(L.ChevronRight,{size:ct.ICON_M,style:i.textMuted})),q.createElement(I,null,q.createElement(ce,{style:[i.Heading1,i.text]},"Apps & Integrations"))),q.createElement(I,null,q.createElement(ce,{style:[i.Body,i.textMid]},"Connect GitBook to your favorite collaboration tools"))),q.createElement(I,null,q.createElement(Dn,{title:"Close",icon:L.X,to:{overlay:null}})))),q.createElement(I,{style:[x.directionRow,x.alignEnd]},q.createElement(I,{style:[x.flex1,E.Padding.mediumHorizontal]},q.createElement(St,null,q.createElement(St.Tab,{active:n==="all",onPress:()=>{a("all")}},"Discover"),q.createElement(St.Tab,{active:n==="installed",onPress:()=>{a("installed")}},"Installed"))),q.createElement(I,{style:[E.Padding.mediumVertical]},q.createElement(Mn,{target:r,size:"medium"})))),q.createElement(I,{style:[x.flex1,o.integrationsListBody]},q.createElement(q.Suspense,{fallback:q.createElement(Gt,{size:"xlarge"})},q.createElement(Zh,{target:r,spaceKey:e==null?void 0:e.key,onlyInstalled:n==="installed"}))))}function Zh(t){let{target:e,spaceKey:r,onlyInstalled:n}=t,[a,i]=We([Ho(),Jo(e)]),o=q.useMemo(()=>n?a.filter(u=>i.some(p=>p.integration===u.name)):a,[a,n]),s=q.useCallback(u=>{let p=i.find(m=>m.integration===u.item.name);return q.createElement(nu,{integration:u.item,installation:p||null,spaceKey:r})},[i,r]);return o.length===0&&n?q.createElement(I,{style:[x.flex1,E.Padding.xlarge]},q.createElement(wt,{kind:"dashed",title:"Nothing to see here\u2026"},"No integrations has been installed on this"," ",e.organization?"organization":"account",". Start by installing a first one.")):q.createElement(ls,{style:[E.Padding.largeHorizontal,E.Padding.mediumVertical],numColumnsPerScreen:{desktop:6,tablet:2,mobile:1},data:o,columnSpacing:E.medium,rowSpacing:E.medium,renderItem:s,keyExtractor:u=>u.name})}var eg=kt.create({integrationsListBody:t=>({backgroundColor:t.colors.background.muted,borderTopWidth:1,borderTopColor:t.colors.border.main})});function tg(t){let{screen:e}=t,r=fs("FEATURE_INTEGRATIONS"),n=Fe(),[a]=We([e.space?zr(e.space):null]);if(kn(o=>{o.setTitle("Integrations")}),!r||e.space&&!a)return Ft.createElement(Ca,{to:{screen:{type:"home"},overlay:null}});if(a&&e.organization!==a.organization)return Ft.createElement(Ca,{to:{current:{type:"integrations",organization:a.organization,space:a.key}}});let i=a?Qo(a):e.organization?{organization:e.organization}:{user:n.uid};return Ft.createElement(Ft.Fragment,null,e.integration?Ft.createElement(ru,{integrationKey:e.integration,space:a,target:i}):Ft.createElement(au,{target:i,space:a}))}export{tg as default};
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/IntegrationScreenContent.lazycomponent-U6JNOZMX.min.js.map
