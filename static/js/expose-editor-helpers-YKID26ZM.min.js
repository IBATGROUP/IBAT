import{E as a,F as p,r as f}from"static/js/chunk-32SZ2X3A.min.js";import"static/js/chunk-2BY25Q75.min.js";import"static/js/chunk-6Z77QNA7.min.js";import{a as s,l as g}from"static/js/chunk-57DNK6NM.min.js";g();function O(y,i){window.GB_dev||(window.GB_dev={}),window.GB_dev.serializeSlate=p,window.GB_dev.editorValue=y,window.GB_dev.createRealtimeReplay=o=>{if(typeof o=="string"&&(o=JSON.parse(o)),!Array.isArray(o)||o[0].type!=="document")throw new Error("Real time dump is misformed");let n=o.filter(e=>e.type==="received"&&e.kind==="apply");console.log(`${n.length} steps in the replay`);let l=!1,t=0,c=()=>{console.log("init",o[0].document);let e=window.GB_dev.editorValue.change().applyOperations([f.create({type:"set_document",data:a(o[0].document)})]);i(e),l=!0},u=(e,h)=>{let d=n.slice(e,h);console.log("applying",d),d.forEach(w=>{let m=window.GB_dev.editorValue.change().applyOperations(w.edits.flat().map(v=>a(s({object:"operation"},v))));i(m),t+=1})},r=e=>{l||c(),e!==t&&(e<t&&(t=0,c()),e>0&&u(t,e))};return{start(){r(0)},restart(){r(0)},get currentStep(){return t},get size(){return n.length},back(){if(t===0){console.log("Already at the start of the replay - cannot go back");return}r(t-1)},forward(){if(t===n.length){console.log("Already at the end of the replay - cannot go forward");return}r(t+1)},go(e){e<0&&t+e<0&&(e=-t),e>0&&t+e>n.length&&(e=n.length-t),r(t+e)}}}}export{O as exposeEditorHelpers};
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/expose-editor-helpers-YKID26ZM.min.js.map
